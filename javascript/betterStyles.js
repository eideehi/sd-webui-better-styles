var BetterStyles=function(){"use strict";var Wr=Object.defineProperty;var Jr=(Ae,ue,ke)=>ue in Ae?Wr(Ae,ue,{enumerable:!0,configurable:!0,writable:!0,value:ke}):Ae[ue]=ke;var At=(Ae,ue,ke)=>(Jr(Ae,typeof ue!="symbol"?ue+"":ue,ke),ke);const Ae="";function ue(t){return Array.isArray(t)?t.filter(ke):[]}function ke(t){return t==null||typeof t!="object"||typeof t.name!="string"?!1:Array.isArray(t.styles)}function vl(t,e){return fetch(`/better-styles-api/v1/delete-styles/${t}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(ue)}function yl(){return fetch(`/better-styles-api/v1/all-style?ts=${new Date().getTime()}`).then(t=>t.json()).then(ue)}function Tt(t){return fetch(`/better-styles-api/v1/get-default-style/${t}?ts=${new Date().getTime()}`).then(e=>e.json()).then(wl)}function wl(t){if(t==null||typeof t!="object"||!kl(t))throw new Error(`Illegal api response: ${JSON.stringify(t)}`);return t}function kl(t){return!(typeof t.prompt!="string"||typeof t.negativePrompt!="string"||typeof t.samplingMethod!="string"||typeof t.samplingSteps!="number"||typeof t.cfgScale!="number"||typeof t.seed!="number"||typeof t.restoreFaces!="boolean"||typeof t.tiling!="boolean"||typeof t.hiresFix!="boolean"||typeof t.upscaler!="string"||typeof t.hiresSteps!="number"||typeof t.denoisingStrength!="number"||typeof t.upscaleBy!="number"||typeof t.clipSkip!="number"||typeof t.etaNoiseSeedDelta!="number")}function Sl(){return fetch(`/better-styles-api/v1/images-dir?ts=${new Date().getTime()}`).then(t=>t.json()).then(El)}function El(t){return t==null||typeof t!="object"||typeof t.imagesDir!="string"?"":t.imagesDir}function Cl(){return fetch(`/better-styles-api/v1/get-localization?ts=${new Date().getTime()}`).then(t=>t.json()).then(Dl)}function Dl(t){return t==null||typeof t!="object"?{}:Al(t)?t:{}}function Al(t){return Object.values(t).every(e=>typeof e=="string")}function Tl(){return fetch(`/better-styles-api/v1/import-styles-csv?ts=${new Date().getTime()}`).then(t=>t.json()).then(ue)}function Bt(t,e){return fetch(`/better-styles-api/v1/register-style/${t}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(ue)}function C(){}const lt=t=>t;function Ve(t,e){for(const n in e)t[n]=e[n];return t}function Ot(t){return t()}function Mt(){return Object.create(null)}function fe(t){t.forEach(Ot)}function Ke(t){return typeof t=="function"}function H(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let We;function Gt(t,e){return t===e?!0:(We||(We=document.createElement("a")),We.href=e,t===We.href)}function Bl(t){return Object.keys(t).length===0}function Ol(t,...e){if(t==null){for(const l of e)l(void 0);return C}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function q(t,e,n){t.$$.on_destroy.push(Ol(e,n))}function Pt(t,e,n,l){if(t){const s=Ft(t,e,n,l);return t[0](s)}}function Ft(t,e,n,l){return t[1]&&l?Ve(n.ctx.slice(),t[1](l(e))):n.ctx}function Lt(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let c=0;c<o;c+=1)i[c]=e.dirty[c]|s[c];return i}return e.dirty|s}return e.dirty}function It(t,e,n,l,s,i){if(s){const o=Ft(e,n,l,i);t.p(o,s)}}function zt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Nt(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Ht=typeof window<"u";let qt=Ht?()=>window.performance.now():()=>Date.now(),st=Ht?t=>requestAnimationFrame(t):C;const Te=new Set;function Rt(t){Te.forEach(e=>{e.c(t)||(Te.delete(e),e.f())}),Te.size!==0&&st(Rt)}function Ut(t){let e;return Te.size===0&&st(Rt),{promise:new Promise(n=>{Te.add(e={c:t,f:n})}),abort(){Te.delete(e)}}}"WeakMap"in(typeof window<"u"?window:typeof globalThis<"u"?globalThis:global);function h(t,e){t.appendChild(e)}function jt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ml(t){const e=A("style");return e.textContent="/* empty */",Gl(jt(t),e),e.sheet}function Gl(t,e){return h(t.head||t,e),e.sheet}function T(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function z(t){return document.createTextNode(t)}function B(){return z(" ")}function Ne(){return z("")}function ie(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Pl(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Vt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Fl=["width","height"];function He(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&Fl.indexOf(l)===-1?t[l]=e[l]:v(t,l,e[l])}function Ll(t){return Array.from(t.childNodes)}function Se(t,e){e=""+e,t.data!==e&&(t.data=e)}function Kt(t,e){t.value=e??""}function N(t,e,n){t.classList.toggle(e,!!n)}function Wt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const Ye=new Map;let Xe=0;function Il(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function zl(t,e){const n={stylesheet:Ml(e),rules:{}};return Ye.set(t,n),n}function Jt(t,e,n,l,s,i,o,c=0){const r=16.666/l;let u=`{
`;for(let O=0;O<=1;O+=r){const L=e+(n-e)*i(O);u+=O*100+`%{${o(L,1-L)}}
`}const a=u+`100% {${o(n,1-n)}}
}`,f=`__svelte_${Il(a)}_${c}`,p=jt(t),{stylesheet:_,rules:m}=Ye.get(p)||zl(p,t);m[f]||(m[f]=!0,_.insertRule(`@keyframes ${f} ${a}`,_.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${f} ${l}ms linear ${s}ms 1 both`,Xe+=1,f}function rt(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),Xe-=s,Xe||Nl())}function Nl(){st(()=>{Xe||(Ye.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&D(e)}),Ye.clear())})}let qe;function Re(t){qe=t}function it(){if(!qe)throw new Error("Function called outside component initialization");return qe}function Hl(){const t=it();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=Wt(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function ql(t,e){return it().$$.context.set(t,e),e}function ae(t){return it().$$.context.get(t)}function Be(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const Oe=[],oe=[];let Me=[];const ot=[],Yt=Promise.resolve();let ut=!1;function Xt(){ut||(ut=!0,Yt.then(Zt))}function Qt(){return Xt(),Yt}function Ge(t){Me.push(t)}function pe(t){ot.push(t)}const ct=new Set;let Pe=0;function Zt(){if(Pe!==0)return;const t=qe;do{try{for(;Pe<Oe.length;){const e=Oe[Pe];Pe++,Re(e),Rl(e.$$)}}catch(e){throw Oe.length=0,Pe=0,e}for(Re(null),Oe.length=0,Pe=0;oe.length;)oe.pop()();for(let e=0;e<Me.length;e+=1){const n=Me[e];ct.has(n)||(ct.add(n),n())}Me.length=0}while(Oe.length);for(;ot.length;)ot.pop()();ut=!1,ct.clear(),Re(t)}function Rl(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ge)}}function Ul(t){const e=[],n=[];Me.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Me=e}let Ue;function xt(){return Ue||(Ue=Promise.resolve(),Ue.then(()=>{Ue=null})),Ue}function Qe(t,e,n){t.dispatchEvent(Wt(`${e?"intro":"outro"}${n}`))}const Ze=new Set;let $e;function j(){$e={r:0,c:[],p:$e}}function V(){$e.r||fe($e.c),$e=$e.p}function d(t,e){t&&t.i&&(Ze.delete(t),t.i(e))}function g(t,e,n,l){if(t&&t.o){if(Ze.has(t))return;Ze.add(t),$e.c.push(()=>{Ze.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const en={duration:0};function jl(t,e,n){const l={direction:"in"};let s=e(t,n,l),i=!1,o,c,r=0;function u(){o&&rt(t,o)}function a(){const{delay:p=0,duration:_=300,easing:m=lt,tick:y=C,css:O}=s||en;O&&(o=Jt(t,0,1,_,p,m,O,r++)),y(0,1);const L=qt()+p,F=L+_;c&&c.abort(),i=!0,Ge(()=>Qe(t,!0,"start")),c=Ut(P=>{if(i){if(P>=F)return y(1,0),Qe(t,!0,"end"),u(),i=!1;if(P>=L){const re=m((P-L)/_);y(re,1-re)}}return i})}let f=!1;return{start(){f||(f=!0,rt(t),Ke(s)?(s=s(l),xt().then(a)):a())},invalidate(){f=!1},end(){i&&(u(),i=!1)}}}function Vl(t,e,n){const l={direction:"out"};let s=e(t,n,l),i=!0,o;const c=$e;c.r+=1;let r;function u(){const{delay:a=0,duration:f=300,easing:p=lt,tick:_=C,css:m}=s||en;m&&(o=Jt(t,1,0,f,a,p,m));const y=qt()+a,O=y+f;Ge(()=>Qe(t,!1,"start")),"inert"in t&&(r=t.inert,t.inert=!0),Ut(L=>{if(i){if(L>=O)return _(0,1),Qe(t,!1,"end"),--c.r||fe(c.c),!1;if(L>=y){const F=p((L-y)/f);_(1-F,F)}}return i})}return Ke(s)?xt().then(()=>{s=s(l),u()}):u(),{end(a){a&&"inert"in t&&(t.inert=r),a&&s.tick&&s.tick(1,0),i&&(o&&rt(t,o),i=!1)}}}function be(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function tn(t,e){const n={},l={},s={$$scope:1};let i=t.length;for(;i--;){const o=t[i],c=e[i];if(c){for(const r in o)r in c||(l[r]=1);for(const r in c)s[r]||(n[r]=c[r],s[r]=1);t[i]=c}else for(const r in o)s[r]=1}for(const o in l)o in n||(n[o]=void 0);return n}[...["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]];function de(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function E(t){t&&t.c()}function w(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Ge(()=>{const i=t.$$.on_mount.map(Ot).filter(Ke);t.$$.on_destroy?t.$$.on_destroy.push(...i):fe(i),t.$$.on_mount=[]}),s.forEach(Ge)}function k(t,e){const n=t.$$;n.fragment!==null&&(Ul(n.after_update),fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Kl(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),Xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,l,s,i,o,c=[-1]){const r=qe;Re(t);const u=t.$$={fragment:null,ctx:[],props:i,update:C,not_equal:s,bound:Mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Mt(),dirty:c,skip_bound:!1,root:e.target||r.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,p,..._)=>{const m=_.length?_[0]:p;return u.ctx&&s(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),a&&Kl(t,f)),p}):[],u.update(),a=!0,fe(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const f=Ll(e.target);u.fragment&&u.fragment.l(f),f.forEach(D)}else u.fragment&&u.fragment.c();e.intro&&d(t.$$.fragment),w(t,e.target,e.anchor),Zt()}Re(r)}class U{constructor(){At(this,"$$");At(this,"$$set")}$destroy(){k(this,1),this.$destroy=C}$on(e,n){if(!Ke(n))return C;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Bl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wl="4",Fe=[];function Jl(t,e){return{subscribe:me(t,e).subscribe}}function me(t,e=C){let n;const l=new Set;function s(c){if(H(t,c)&&(t=c,n)){const r=!Fe.length;for(const u of l)u[1](),Fe.push(u,t);if(r){for(let u=0;u<Fe.length;u+=2)Fe[u][0](Fe[u+1]);Fe.length=0}}}function i(c){s(c(t))}function o(c,r=C){const u=[c,r];return l.add(u),l.size===1&&(n=e(s,i)||C),c(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}function te(t){const e=gradioApp().querySelector(t);return e instanceof HTMLElement?e:null}function Yl(t){return!!te(t)}function at(t,e){t==null||t.classList.toggle("force-hidden",e)}const xe=Jl("",t=>{let e="",n=window.setTimeout(function l(){var i;const s=((i=te("#sd_checkpoint_hash"))==null?void 0:i.title)||"";s!==e&&t(e=s),n=window.setTimeout(l,125)},10);return()=>window.clearTimeout(n)}),nn=me(""),ge=me([]),ln=me(new Date().getTime());function $(t,...e){const n=getTranslation(t)||t;return e.length===0?n:e.reduce((l,s,i)=>l.replaceAll(`{${i}}`,String(s)),n)}function sn(t,e){const n=opts[t];return typeof n=="boolean"?n:e}function Xl(t,e){const n=opts[t];typeof n=="boolean"&&e(n)}function Ql(){const t=get_uiCurrentTabContent();if(t==null)return"other";const{id:e}=t;if(e.startsWith("tab_")){const n=e.slice(4);switch(n){case"txt2img":case"img2img":return n}}return"other"}function ft(){return Yl(".gradio-container.dark")}typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wl);const Zl=/,(\s+)?$/g,xl=/^(\s+)?,/g;function rn(t,e){return!t||Zl.test(t)||xl.test(e)?t+e:`${t}, ${e}`}function on(t,e,n=!1){if(e.prompt!=null){const l=yn(t);n?l.set(e.prompt):l.set(rn(l.getOrDefault(""),e.prompt))}if(e.negativePrompt!=null){const l=vn(t);n?l.set(e.negativePrompt):l.set(rn(l.getOrDefault(""),e.negativePrompt))}e.samplingMethod!=null&&En(t).set(e.samplingMethod),e.samplingSteps!=null&&Cn(t).set(e.samplingSteps),e.cfgScale!=null&&an(t).set(e.cfgScale),e.seed!=null&&Dn(t).set(e.seed),e.restoreFaces!=null&&wn(t).set(e.restoreFaces),e.tiling!=null&&An(t).set(e.tiling),e.hiresFix!=null&&_n(t).set(e.hiresFix),e.upscaler!=null&&Bn(t).set(e.upscaler),e.hiresSteps!=null&&mn(t).set(e.hiresSteps),e.denoisingStrength!=null&&pn(t).set(e.denoisingStrength),e.upscaleBy!=null&&Tn(t).set(e.upscaleBy),e.clipSkip!=null&&fn().set(e.clipSkip),e.etaNoiseSeedDelta!=null&&dn().set(e.etaNoiseSeedDelta)}function un(t,e){return t.styles.filter(n=>n.checkpoint==null||n.checkpoint===e)}function pt(t,e){return un(t,e).length>0}function et(t){return{...t,getOrDefault:e=>{const n=t.get();return n??e},with:e=>{const n=t.get();n!=null&&e(n)}}}function ve(t){return et({get:()=>{const e=cn(t);return e!=null?e.valueAsNumber:null},set:e=>{const n=cn(t);n!=null&&(n.valueAsNumber=e,updateInput(n))}})}function cn(t){const e=te(t);return e!=null&&e instanceof HTMLInputElement?e:null}function an(t){return ve(`#${t}_cfg_scale input[type='number']`)}function es(){const t=()=>{const e=te("#sd_checkpoint_hash");return e==null||!(e instanceof HTMLAnchorElement)?null:e.title};return{get:t,getOrDefault:e=>{const n=t();return n??e},with:e=>{const n=t();n!=null&&e(n)}}}function fn(){return ve("#setting_CLIP_stop_at_last_layers input[type='number']")}function pn(t){return ve(`#${t}_denoising_strength input[type='number']`)}function dn(){return ve("#setting_eta_noise_seed_delta input[type='number']")}function dt(t){return et({get:()=>{const e=gn(t);return e!=null?e.checked:null},set:e=>{const n=gn(t);n!=null&&n.checked!==e&&n.click()}})}function gn(t){const e=te(t);return e!=null&&e instanceof HTMLInputElement?e:null}function _n(t){return dt(`#${t}_enable_hr input[type='checkbox']`)}function mn(t){return ve(`#${t}_hires_steps input[type='number']`)}function hn(t){const e=()=>{const n=te(`#${t}_gallery > div > img`);return n==null||!(n instanceof HTMLImageElement)?null:n.src.substring(n.src.indexOf("file=")+5)};return{get:e,getOrDefault:n=>{const l=e();return l??n},with:n=>{const l=e();l!=null&&n(l)}}}function $n(t){return et({get:()=>{const e=bn(t);return e!=null?e.value:null},set:e=>{const n=bn(t);n!=null&&(n.value=e,updateInput(n))}})}function bn(t){const e=te(t);return e!=null&&e instanceof HTMLTextAreaElement?e:null}function vn(t){return $n(`#${t}_neg_prompt textarea`)}function yn(t){return $n(`#${t}_prompt textarea`)}function wn(t){return dt(`#${t}_restore_faces input[type='checkbox']`)}let kn=Promise.resolve();function Sn(t){return et({get:()=>{let e=te(`${t} input`);return e instanceof HTMLInputElement?e.value:(e=te(`${t} [data-testid="block-info"]`),e==null?void 0:e.textContent)},set:e=>{const n=async()=>{const l=te(`${t} input`);if(!(l instanceof HTMLInputElement))return;l.dispatchEvent(new Event("focus")),await Qt();const s=te(`${t} ul > li[data-value="${e}"]`);s!=null&&s.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))};return kn=(async()=>(await kn,n()))(),!0}})}function En(t){return Sn(`#${t}_sampling`)}function Cn(t){return ve(`#${t}_steps input[type='number']`)}function Dn(t){return ve(`#${t}_seed input[type='number']`)}function An(t){return dt(`#${t}_tiling input[type='checkbox']`)}function Tn(t){return ve(`#${t}_hr_scale input[type='number']`)}function Bn(t){return Sn(`#${t}_hr_upscaler`)}const ce=Symbol(),Qr="";function ts(t){let e,n,l,s=[t[1],{class:"text-input scroll-hide"}],i={};for(let o=0;o<s.length;o+=1)i=Ve(i,s[o]);return{c(){e=A("textarea"),He(e,i),N(e,"svelte-17bcadh",!0)},m(o,c){T(o,e,c),e.autofocus&&e.focus(),Kt(e,t[0]),n||(l=[ie(e,"input",t[5]),ie(e,"change",t[3]),ie(e,"input",t[4])],n=!0)},p(o,[c]){c&1&&Kt(e,o[0]),N(e,"svelte-17bcadh",!0)},i:C,o:C,d(o){o&&D(e),n=!1,fe(l)}}}function ns(t,e,n){let{value:l=""}=e,{options:s={}}=e;const o=Object.assign(Object.assign({},{rows:1}),s);function c(a){Be.call(this,t,a)}function r(a){Be.call(this,t,a)}function u(){l=this.value,n(0,l)}return t.$$set=a=>{"value"in a&&n(0,l=a.value),"options"in a&&n(2,s=a.options)},[l,o,s,c,r,u]}class On extends U{constructor(e){super(),R(this,e,ns,ts,H,{value:0,options:2})}}const Zr="";function ls(t){let e,n,l;return n=new On({props:{options:{placeholder:$("Search...")}}}),n.$on("input",t[0]),{c(){e=A("div"),E(n.$$.fragment),v(e,"class","search svelte-arajpf")},m(s,i){T(s,e,i),w(n,e,null),l=!0},p:C,i(s){l||(d(n.$$.fragment,s),l=!0)},o(s){g(n.$$.fragment,s),l=!1},d(s){s&&D(e),k(n)}}}function ss(t){const{styleSearchKeyword:e}=ae(ce);function n(l){l.target instanceof HTMLTextAreaElement&&e.set(l.target.value.toLowerCase())}return[n]}class rs extends U{constructor(e){super(),R(this,e,ss,ls,H,{})}}const gt=me([]),is=gt;function Le(t){gt.update(e=>e.some(n=>n.text===t.text)?e:[...e,Object.assign({type:"info",duration:3e3},t)])}function Mn(t){gt.update(e=>e.filter(n=>n!==t))}const xr="";function os(t){let e,n,l,s;const i=t[4].default,o=Pt(i,t,t[3],null);let c=[t[2],{class:"button"}],r={};for(let u=0;u<c.length;u+=1)r=Ve(r,c[u]);return{c(){e=A("button"),o&&o.c(),He(e,r),N(e,"lg",t[1]==="large"),N(e,"sm",t[1]==="small"),N(e,"primary",t[0]),N(e,"secondary",!t[0]),N(e,"svelte-1psaz41",!0)},m(u,a){T(u,e,a),o&&o.m(e,null),e.autofocus&&e.focus(),n=!0,l||(s=ie(e,"click",t[5]),l=!0)},p(u,[a]){o&&o.p&&(!n||a&8)&&It(o,i,u,u[3],n?Lt(i,u[3],a,null):zt(u[3]),null),He(e,r=tn(c,[a&4&&u[2],{class:"button"}])),N(e,"lg",u[1]==="large"),N(e,"sm",u[1]==="small"),N(e,"primary",u[0]),N(e,"secondary",!u[0]),N(e,"svelte-1psaz41",!0)},i(u){n||(d(o,u),n=!0)},o(u){g(o,u),n=!1},d(u){u&&D(e),o&&o.d(u),l=!1,s()}}}function us(t,e,n){let{$$slots:l={},$$scope:s}=e,{primary:i=!1}=e,{size:o="large"}=e,{options:c={}}=e;function r(u){Be.call(this,t,u)}return t.$$set=u=>{"primary"in u&&n(0,i=u.primary),"size"in u&&n(1,o=u.size),"options"in u&&n(2,c=u.options),"$$scope"in u&&n(3,s=u.$$scope)},[i,o,c,s,l,r]}class le extends U{constructor(e){super(),R(this,e,us,os,H,{primary:0,size:1,options:2})}}function cs(t){let e=$("Apply style")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function as(t){let e,n;return e=new le({props:{$$slots:{default:[cs]},$$scope:{ctx:t}}}),e.$on("click",t[1]),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,[s]){const i={};s&16&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function fs(t,e,n){let l;const{tabName:s,selectedStyles:i}=ae(ce);q(t,i,c=>n(2,l=c));function o(){if(l.length===0){Le({type:"warning",text:$("Style is not selected")});return}l.forEach(c=>on(s,c)),i.set([])}return[i,o]}class ps extends U{constructor(e){super(),R(this,e,fs,as,H,{})}}function ds(t){return{image:hn(t),checkpoint:es(),prompt:yn(t),negativePrompt:vn(t),samplingMethod:En(t),samplingSteps:Cn(t),cfgScale:an(t),seed:Dn(t),restoreFaces:wn(t),tiling:An(t),hiresFix:_n(t),upscaler:Bn(t),hiresSteps:mn(t),denoisingStrength:pn(t),upscaleBy:Tn(t),clipSkip:fn(),etaNoiseSeedDelta:dn()}}function Gn(t={}){return Object.assign({group:null,style:{name:null,image:null,checkpoint:null,prompt:null,negativePrompt:null,samplingMethod:null,samplingSteps:null,cfgScale:null,seed:null,restoreFaces:null,tiling:null,hiresFix:null,upscaler:null,hiresSteps:null,denoisingStrength:null,upscaleBy:null,clipSkip:null,etaNoiseSeedDelta:null}},t)}function gs(t){const e=l=>l===$("default")?"default":l,n={...t.style};for(const l in n)(n[l]==null||typeof n[l]=="string"&&!n[l])&&delete n[l];return{group:e(t.group),style:n}}const ei="";function _s(t){let e,n,l,s,i,o,c,r=[{class:"input"},t[2],{type:"checkbox"}],u={};for(let a=0;a<r.length;a+=1)u=Ve(u,r[a]);return{c(){e=A("label"),n=A("input"),l=B(),s=A("span"),i=z(t[1]),He(n,u),N(n,"svelte-1wpl5ad",!0),v(s,"class","label svelte-1wpl5ad"),v(e,"class","checkbox svelte-1wpl5ad"),N(e,"disabled",t[2].disabled)},m(a,f){T(a,e,f),h(e,n),n.autofocus&&n.focus(),n.checked=t[0],h(e,l),h(e,s),h(s,i),o||(c=[ie(n,"change",t[4]),ie(n,"change",t[3])],o=!0)},p(a,[f]){He(n,u=tn(r,[{class:"input"},f&4&&a[2],{type:"checkbox"}])),f&1&&(n.checked=a[0]),N(n,"svelte-1wpl5ad",!0),f&2&&Se(i,a[1]),f&4&&N(e,"disabled",a[2].disabled)},i:C,o:C,d(a){a&&D(e),o=!1,fe(c)}}}function ms(t,e,n){let{label:l}=e,{value:s=!1}=e,{options:i={}}=e;function o(r){Be.call(this,t,r)}function c(){s=this.checked,n(0,s)}return t.$$set=r=>{"label"in r&&n(1,l=r.label),"value"in r&&n(0,s=r.value),"options"in r&&n(2,i=r.options)},[s,l,i,o,c]}class se extends U{constructor(e){super(),R(this,e,ms,_s,H,{label:1,value:0,options:2})}}const ti="";function Pn(t){let e,n,l,s,i=!t[2]&&hs(t);const o=t[5].default,c=Pt(o,t,t[4],null);return{c(){e=A("dialog"),n=A("div"),i&&i.c(),l=B(),c&&c.c(),v(n,"class","content-wrapper svelte-1sratha"),v(e,"class","modal-dialog svelte-1sratha"),N(e,"dark",ft())},m(r,u){T(r,e,u),h(e,n),i&&i.m(n,null),h(n,l),c&&c.m(n,null),t[7](e),s=!0},p(r,u){r[2]||i.p(r,u),c&&c.p&&(!s||u&16)&&It(c,o,r,r[4],s?Lt(o,r[4],u,null):zt(r[4]),null)},i(r){s||(d(c,r),s=!0)},o(r){g(c,r),s=!1},d(r){r&&D(e),i&&i.d(),c&&c.d(r),t[7](null)}}}function hs(t){let e,n,l;return{c(){e=A("button"),e.textContent="×",v(e,"class","close-button svelte-1sratha")},m(s,i){T(s,e,i),n||(l=ie(e,"click",t[6]),n=!0)},p:C,d(s){s&&D(e),n=!1,l()}}}function $s(t){let e,n,l=t[0]&&Pn(t);return{c(){l&&l.c(),e=Ne()},m(s,i){l&&l.m(s,i),T(s,e,i),n=!0},p(s,[i]){s[0]?l?(l.p(s,i),i&1&&d(l,1)):(l=Pn(s),l.c(),d(l,1),l.m(e.parentNode,e)):l&&(j(),g(l,1,1,()=>{l=null}),V())},i(s){n||(d(l),n=!0)},o(s){g(l),n=!1},d(s){s&&D(e),l&&l.d(s)}}}function bs(t,e,n){let{$$slots:l={},$$scope:s}=e,{show:i}=e,{options:o={}}=e;const{hideCloseButton:c}=Object.assign({hideCloseButton:!1},o),r=Hl();let u,a=new MutationObserver(_=>{_.forEach(m=>{m.type==="attributes"&&m.attributeName==="open"&&(m.target!==u||u==null||u.open&&r("open"))})});const f=()=>u==null?void 0:u.close();function p(_){oe[_?"unshift":"push"](()=>{u=_,n(1,u)})}return t.$$set=_=>{"show"in _&&n(0,i=_.show),"options"in _&&n(3,o=_.options),"$$scope"in _&&n(4,s=_.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&u!=null&&(document.body.append(u),a.disconnect(),a.observe(u,{attributes:!0}),u.addEventListener("close",()=>{n(0,i=!1),r("close")})),t.$$.dirty&3&&(i?u==null||u.showModal():u==null||u.close())},[i,u,c,o,s,l,f,p]}class je extends U{constructor(e){super(),R(this,e,bs,$s,H,{show:0,options:3})}}const ni="";function vs(t){let e,n,l,s,i,o,c;function r(a){t[3](a)}let u={options:t[2]};return t[0]!==void 0&&(u.value=t[0]),i=new On({props:u}),oe.push(()=>de(i,"value",r)),i.$on("change",t[4]),i.$on("input",t[5]),{c(){e=A("div"),n=A("span"),l=z(t[1]),s=B(),E(i.$$.fragment),v(n,"class","label svelte-lrg8sw"),v(e,"class","text-field svelte-lrg8sw")},m(a,f){T(a,e,f),h(e,n),h(n,l),h(e,s),w(i,e,null),c=!0},p(a,[f]){(!c||f&2)&&Se(l,a[1]);const p={};f&4&&(p.options=a[2]),!o&&f&1&&(o=!0,p.value=a[0],pe(()=>o=!1)),i.$set(p)},i(a){c||(d(i.$$.fragment,a),c=!0)},o(a){g(i.$$.fragment,a),c=!1},d(a){a&&D(e),k(i)}}}function ys(t,e,n){let{label:l}=e,{value:s=""}=e,{options:i={}}=e;function o(u){s=u,n(0,s)}function c(u){Be.call(this,t,u)}function r(u){Be.call(this,t,u)}return t.$$set=u=>{"label"in u&&n(1,l=u.label),"value"in u&&n(0,s=u.value),"options"in u&&n(2,i=u.options)},[s,l,i,o,c,r]}class tt extends U{constructor(e){super(),R(this,e,ys,vs,H,{label:1,value:0,options:2})}}const li="";function ws(t){let e=$("Save style")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function ks(t){let e=$("Display only the changed parameters")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Ss(t){let e=$("Display all parameters")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Es(t){let e;function n(i,o){return i[3]?Ss:ks}let l=n(t),s=l(t);return{c(){s.c(),e=Ne()},m(i,o){s.m(i,o),T(i,e,o)},p(i,o){l===(l=n(i))&&s?s.p(i,o):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&D(e),s.d(i)}}}function Fn(t){let e,n;return e=new se({props:{label:$("Sampling method")}}),e.$on("change",t[9]("samplingMethod")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Ln(t){let e,n;return e=new se({props:{label:$("Sampling steps")}}),e.$on("change",t[9]("samplingSteps")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function In(t){let e,n;return e=new se({props:{label:$("CFG Scale")}}),e.$on("change",t[9]("cfgScale")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function zn(t){let e,n;return e=new se({props:{label:$("Seed")}}),e.$on("change",t[9]("seed")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Nn(t){let e,n;return e=new se({props:{label:$("Restore faces")}}),e.$on("change",t[9]("restoreFaces")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Hn(t){let e,n;return e=new se({props:{label:$("Tiling")}}),e.$on("change",t[9]("tiling")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function qn(t){let e,n;return e=new se({props:{label:$("Hires. fix")}}),e.$on("change",t[9]("hiresFix")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Cs(t){let e=!t[3]||t[4].includes("upscaler"),n,l=!t[3]||t[4].includes("hiresSteps"),s,i=!t[3]||t[4].includes("denoisingStrength"),o,c=!t[3]||t[4].includes("upscaleBy"),r,u,a=e&&Rn(t),f=l&&Un(t),p=i&&jn(t),_=c&&Vn(t);return{c(){a&&a.c(),n=B(),f&&f.c(),s=B(),p&&p.c(),o=B(),_&&_.c(),r=Ne()},m(m,y){a&&a.m(m,y),T(m,n,y),f&&f.m(m,y),T(m,s,y),p&&p.m(m,y),T(m,o,y),_&&_.m(m,y),T(m,r,y),u=!0},p(m,y){y&24&&(e=!m[3]||m[4].includes("upscaler")),e?a?(a.p(m,y),y&24&&d(a,1)):(a=Rn(m),a.c(),d(a,1),a.m(n.parentNode,n)):a&&(j(),g(a,1,1,()=>{a=null}),V()),y&24&&(l=!m[3]||m[4].includes("hiresSteps")),l?f?(f.p(m,y),y&24&&d(f,1)):(f=Un(m),f.c(),d(f,1),f.m(s.parentNode,s)):f&&(j(),g(f,1,1,()=>{f=null}),V()),y&24&&(i=!m[3]||m[4].includes("denoisingStrength")),i?p?(p.p(m,y),y&24&&d(p,1)):(p=jn(m),p.c(),d(p,1),p.m(o.parentNode,o)):p&&(j(),g(p,1,1,()=>{p=null}),V()),y&24&&(c=!m[3]||m[4].includes("upscaleBy")),c?_?(_.p(m,y),y&24&&d(_,1)):(_=Vn(m),_.c(),d(_,1),_.m(r.parentNode,r)):_&&(j(),g(_,1,1,()=>{_=null}),V())},i(m){u||(d(a),d(f),d(p),d(_),u=!0)},o(m){g(a),g(f),g(p),g(_),u=!1},d(m){m&&(D(n),D(s),D(o),D(r)),a&&a.d(m),f&&f.d(m),p&&p.d(m),_&&_.d(m)}}}function Rn(t){let e,n;return e=new se({props:{label:$("Upscaler")}}),e.$on("change",t[9]("upscaler")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Un(t){let e,n;return e=new se({props:{label:$("Hires steps")}}),e.$on("change",t[9]("hiresSteps")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function jn(t){let e,n;return e=new se({props:{label:$("Denoising strength")}}),e.$on("change",t[9]("denoisingStrength")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Vn(t){let e,n;return e=new se({props:{label:$("Upscale by")}}),e.$on("change",t[9]("upscaleBy")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Kn(t){let e,n;return e=new se({props:{label:$("Clip skip")}}),e.$on("change",t[9]("clipSkip")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Wn(t){let e,n;return e=new se({props:{label:$("Eta noise seed delta")}}),e.$on("change",t[9]("etaNoiseSeedDelta")),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Ds(t){let e=$("Save with this content")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function As(t){let e=$("Close without saving")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Ts(t){let e,n,l,s,i,o,c,r,u,a,f,p,_,m,y,O,L,F,P,re,S,_e=!t[3]||t[4].includes("samplingMethod"),I,M=!t[3]||t[4].includes("samplingSteps"),ne,Ee=!t[3]||t[4].includes("cfgScale"),_t,mt=!t[3]||t[4].includes("seed"),ht,$t=!t[3]||t[4].includes("restoreFaces"),bt,vt=!t[3]||t[4].includes("tiling"),yt,wt=!t[3]||t[4].includes("hiresFix"),kt,sl=t[6].hiresFix.getOrDefault(!1),rl,St=!t[3]||t[4].includes("clipSkip"),Et,Ct=!t[3]||t[4].includes("etaNoiseSeedDelta"),il,Ie,Ce,ol,De,ul,ze,ye,cl,we,nt;function Ur(b){t[11](b)}let al={label:$("Style name")};t[1].style.name!==void 0&&(al.value=t[1].style.name),l=new tt({props:al}),oe.push(()=>de(l,"value",Ur));function jr(b){t[12](b)}let fl={label:$("Group")};t[1].group!==void 0&&(fl.value=t[1].group),o=new tt({props:fl}),oe.push(()=>de(o,"value",jr));function Vr(b){t[13](b)}let pl={label:$("Prompt"),options:{rows:3}};t[1].style.prompt!==void 0&&(pl.value=t[1].style.prompt),u=new tt({props:pl}),oe.push(()=>de(u,"value",Vr));function Kr(b){t[14](b)}let dl={label:$("Negative prompt"),options:{rows:3}};t[1].style.negativePrompt!==void 0&&(dl.value=t[1].style.negativePrompt),p=new tt({props:dl}),oe.push(()=>de(p,"value",Kr)),P=new le({props:{size:"small",$$slots:{default:[Es]},$$scope:{ctx:t}}}),P.$on("click",t[8]);let K=_e&&Fn(t),W=M&&Ln(t),J=Ee&&In(t),Y=mt&&zn(t),X=$t&&Nn(t),Q=vt&&Hn(t),Z=wt&&qn(t),he=sl&&Cs(t),x=St&&Kn(t),ee=Ct&&Wn(t);return Ce=new se({props:{label:$("Make this style exclusive to the current checkpoint")}}),Ce.$on("change",t[9]("checkpoint")),De=new se({props:{label:$("Use the current image as a thumbnail"),options:{disabled:t[6].image.get()==null}}}),De.$on("change",t[9]("image")),ye=new le({props:{options:{disabled:!t[2]},primary:!0,$$slots:{default:[Ds]},$$scope:{ctx:t}}}),ye.$on("click",t[10]),we=new le({props:{$$slots:{default:[As]},$$scope:{ctx:t}}}),we.$on("click",t[15]),{c(){e=A("div"),n=A("div"),E(l.$$.fragment),i=B(),E(o.$$.fragment),r=B(),E(u.$$.fragment),f=B(),E(p.$$.fragment),m=B(),y=A("div"),O=A("div"),L=A("span"),L.textContent=`${$("Save these parameters as style")}`,F=B(),E(P.$$.fragment),re=B(),S=A("ul"),K&&K.c(),I=B(),W&&W.c(),ne=B(),J&&J.c(),_t=B(),Y&&Y.c(),ht=B(),X&&X.c(),bt=B(),Q&&Q.c(),yt=B(),Z&&Z.c(),kt=B(),he&&he.c(),rl=B(),x&&x.c(),Et=B(),ee&&ee.c(),il=B(),Ie=A("div"),E(Ce.$$.fragment),ol=B(),E(De.$$.fragment),ul=B(),ze=A("div"),E(ye.$$.fragment),cl=B(),E(we.$$.fragment),v(n,"class","input-fields svelte-kfr9r"),v(L,"class","label"),v(O,"class","header svelte-kfr9r"),v(S,"class","parameter-fields svelte-kfr9r"),v(y,"class","parameters svelte-kfr9r"),v(Ie,"class","other-options svelte-kfr9r"),v(ze,"class","buttons svelte-kfr9r"),v(e,"class","save-style svelte-kfr9r")},m(b,G){T(b,e,G),h(e,n),w(l,n,null),h(n,i),w(o,n,null),h(n,r),w(u,n,null),h(n,f),w(p,n,null),h(e,m),h(e,y),h(y,O),h(O,L),h(O,F),w(P,O,null),h(y,re),h(y,S),K&&K.m(S,null),h(S,I),W&&W.m(S,null),h(S,ne),J&&J.m(S,null),h(S,_t),Y&&Y.m(S,null),h(S,ht),X&&X.m(S,null),h(S,bt),Q&&Q.m(S,null),h(S,yt),Z&&Z.m(S,null),h(S,kt),he&&he.m(S,null),h(S,rl),x&&x.m(S,null),h(S,Et),ee&&ee.m(S,null),h(e,il),h(e,Ie),w(Ce,Ie,null),h(Ie,ol),w(De,Ie,null),h(e,ul),h(e,ze),w(ye,ze,null),h(ze,cl),w(we,ze,null),nt=!0},p(b,G){const gl={};!s&&G&2&&(s=!0,gl.value=b[1].style.name,pe(()=>s=!1)),l.$set(gl);const _l={};!c&&G&2&&(c=!0,_l.value=b[1].group,pe(()=>c=!1)),o.$set(_l);const ml={};!a&&G&2&&(a=!0,ml.value=b[1].style.prompt,pe(()=>a=!1)),u.$set(ml);const hl={};!_&&G&2&&(_=!0,hl.value=b[1].style.negativePrompt,pe(()=>_=!1)),p.$set(hl);const $l={};G&2097160&&($l.$$scope={dirty:G,ctx:b}),P.$set($l),G&24&&(_e=!b[3]||b[4].includes("samplingMethod")),_e?K?(K.p(b,G),G&24&&d(K,1)):(K=Fn(b),K.c(),d(K,1),K.m(S,I)):K&&(j(),g(K,1,1,()=>{K=null}),V()),G&24&&(M=!b[3]||b[4].includes("samplingSteps")),M?W?(W.p(b,G),G&24&&d(W,1)):(W=Ln(b),W.c(),d(W,1),W.m(S,ne)):W&&(j(),g(W,1,1,()=>{W=null}),V()),G&24&&(Ee=!b[3]||b[4].includes("cfgScale")),Ee?J?(J.p(b,G),G&24&&d(J,1)):(J=In(b),J.c(),d(J,1),J.m(S,_t)):J&&(j(),g(J,1,1,()=>{J=null}),V()),G&24&&(mt=!b[3]||b[4].includes("seed")),mt?Y?(Y.p(b,G),G&24&&d(Y,1)):(Y=zn(b),Y.c(),d(Y,1),Y.m(S,ht)):Y&&(j(),g(Y,1,1,()=>{Y=null}),V()),G&24&&($t=!b[3]||b[4].includes("restoreFaces")),$t?X?(X.p(b,G),G&24&&d(X,1)):(X=Nn(b),X.c(),d(X,1),X.m(S,bt)):X&&(j(),g(X,1,1,()=>{X=null}),V()),G&24&&(vt=!b[3]||b[4].includes("tiling")),vt?Q?(Q.p(b,G),G&24&&d(Q,1)):(Q=Hn(b),Q.c(),d(Q,1),Q.m(S,yt)):Q&&(j(),g(Q,1,1,()=>{Q=null}),V()),G&24&&(wt=!b[3]||b[4].includes("hiresFix")),wt?Z?(Z.p(b,G),G&24&&d(Z,1)):(Z=qn(b),Z.c(),d(Z,1),Z.m(S,kt)):Z&&(j(),g(Z,1,1,()=>{Z=null}),V()),sl&&he.p(b,G),G&24&&(St=!b[3]||b[4].includes("clipSkip")),St?x?(x.p(b,G),G&24&&d(x,1)):(x=Kn(b),x.c(),d(x,1),x.m(S,Et)):x&&(j(),g(x,1,1,()=>{x=null}),V()),G&24&&(Ct=!b[3]||b[4].includes("etaNoiseSeedDelta")),Ct?ee?(ee.p(b,G),G&24&&d(ee,1)):(ee=Wn(b),ee.c(),d(ee,1),ee.m(S,null)):ee&&(j(),g(ee,1,1,()=>{ee=null}),V());const Dt={};G&4&&(Dt.options={disabled:!b[2]}),G&2097152&&(Dt.$$scope={dirty:G,ctx:b}),ye.$set(Dt);const bl={};G&2097152&&(bl.$$scope={dirty:G,ctx:b}),we.$set(bl)},i(b){nt||(d(l.$$.fragment,b),d(o.$$.fragment,b),d(u.$$.fragment,b),d(p.$$.fragment,b),d(P.$$.fragment,b),d(K),d(W),d(J),d(Y),d(X),d(Q),d(Z),d(he),d(x),d(ee),d(Ce.$$.fragment,b),d(De.$$.fragment,b),d(ye.$$.fragment,b),d(we.$$.fragment,b),nt=!0)},o(b){g(l.$$.fragment,b),g(o.$$.fragment,b),g(u.$$.fragment,b),g(p.$$.fragment,b),g(P.$$.fragment,b),g(K),g(W),g(J),g(Y),g(X),g(Q),g(Z),g(he),g(x),g(ee),g(Ce.$$.fragment,b),g(De.$$.fragment,b),g(ye.$$.fragment,b),g(we.$$.fragment,b),nt=!1},d(b){b&&D(e),k(l),k(o),k(u),k(p),k(P),K&&K.d(),W&&W.d(),J&&J.d(),Y&&Y.d(),X&&X.d(),Q&&Q.d(),Z&&Z.d(),he&&he.d(),x&&x.d(),ee&&ee.d(),k(Ce),k(De),k(ye),k(we)}}}function Bs(t){let e,n,l,s,i;e=new le({props:{$$slots:{default:[ws]},$$scope:{ctx:t}}}),e.$on("click",t[7]);function o(r){t[16](r)}let c={$$slots:{default:[Ts]},$$scope:{ctx:t}};return t[0]!==void 0&&(c.show=t[0]),l=new je({props:c}),oe.push(()=>de(l,"show",o)),{c(){E(e.$$.fragment),n=B(),E(l.$$.fragment)},m(r,u){w(e,r,u),T(r,n,u),w(l,r,u),i=!0},p(r,[u]){const a={};u&2097152&&(a.$$scope={dirty:u,ctx:r}),e.$set(a);const f={};u&2097183&&(f.$$scope={dirty:u,ctx:r}),!s&&u&1&&(s=!0,f.show=r[0],pe(()=>s=!1)),l.$set(f)},i(r){i||(d(e.$$.fragment,r),d(l.$$.fragment,r),i=!0)},o(r){g(e.$$.fragment,r),g(l.$$.fragment,r),i=!1},d(r){r&&D(n),k(e,r),k(l,r)}}}function Os(t,e,n){let l;const{tabName:s,activeGroup:i}=ae(ce);q(t,i,M=>n(18,l=M));let o=!1,c=ds(s),r=Gn({group:"",style:{}}),u={};function a(){n(1,r=Gn({group:l,style:{prompt:c.prompt.getOrDefault(""),negativePrompt:c.negativePrompt.getOrDefault("")}})),Tt(s).then(M=>u=M),n(0,o=!0)}const f=["samplingMethod","samplingSteps","cfgScale","seed","restoreFaces","tiling","hiresFix","upscaler","hiresSteps","denoisingStrength","upscaleBy","clipSkip","etaNoiseSeedDelta"];let p=!1,_=[];function m(){if(n(3,p=!p),p){const M=[];f.forEach(ne=>{const Ee=c[ne].get();Ee==null||u[ne]===Ee||(M.push(ne),n(1,r.style={...r.style,[ne]:Ee},r))}),n(4,_=M)}else n(4,_=[])}let y;const O=M=>ne=>{ne.target instanceof HTMLInputElement&&n(1,r.style={...r.style,[M]:ne.target.checked?c[M].get():null},r)};async function L(){const M=gs(r);await Bt(M.group,M.style).then(ne=>{n(0,o=!1),ge.set(ne),Le({type:"success",text:$("Style registered")})})}function F(M){t.$$.not_equal(r.style.name,M)&&(r.style.name=M,n(1,r))}function P(M){t.$$.not_equal(r.group,M)&&(r.group=M,n(1,r))}function re(M){t.$$.not_equal(r.style.prompt,M)&&(r.style.prompt=M,n(1,r))}function S(M){t.$$.not_equal(r.style.negativePrompt,M)&&(r.style.negativePrompt=M,n(1,r))}const _e=()=>n(0,o=!1);function I(M){o=M,n(0,o)}return t.$$.update=()=>{t.$$.dirty&1&&(o||(n(3,p=!1),n(4,_=[]))),t.$$.dirty&6&&(n(2,y=r.group.length>0),n(2,y=y&&(r.style.name||"").length>0))},[o,r,y,p,_,i,c,a,m,O,L,F,P,re,S,_e,I]}class Ms extends U{constructor(e){super(),R(this,e,Os,Bs,H,{})}}const si="";function Gs(t){let e=$("Delete style")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Ps(t){let e=$("Execute the deletion")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Fs(t){let e=$("Close without deleting")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Ls(t){let e,n,l,s,i,o,c,r;return i=new le({props:{primary:!0,$$slots:{default:[Ps]},$$scope:{ctx:t}}}),i.$on("click",t[4]),c=new le({props:{$$slots:{default:[Fs]},$$scope:{ctx:t}}}),c.$on("click",t[5]),{c(){e=A("div"),n=A("p"),n.textContent=`${$("Delete all selected styles. This action cannot be undone. Are you sure?")}`,l=B(),s=A("div"),E(i.$$.fragment),o=B(),E(c.$$.fragment),v(n,"class","text svelte-1navfxl"),v(s,"class","buttons svelte-1navfxl"),v(e,"class","delete-styles svelte-1navfxl")},m(u,a){T(u,e,a),h(e,n),h(e,l),h(e,s),w(i,s,null),h(s,o),w(c,s,null),r=!0},p(u,a){const f={};a&2048&&(f.$$scope={dirty:a,ctx:u}),i.$set(f);const p={};a&2048&&(p.$$scope={dirty:a,ctx:u}),c.$set(p)},i(u){r||(d(i.$$.fragment,u),d(c.$$.fragment,u),r=!0)},o(u){g(i.$$.fragment,u),g(c.$$.fragment,u),r=!1},d(u){u&&D(e),k(i),k(c)}}}function Is(t){let e,n,l,s,i;e=new le({props:{$$slots:{default:[Gs]},$$scope:{ctx:t}}}),e.$on("click",t[3]);function o(r){t[6](r)}let c={options:{hideCloseButton:!0},$$slots:{default:[Ls]},$$scope:{ctx:t}};return t[0]!==void 0&&(c.show=t[0]),l=new je({props:c}),oe.push(()=>de(l,"show",o)),{c(){E(e.$$.fragment),n=B(),E(l.$$.fragment)},m(r,u){w(e,r,u),T(r,n,u),w(l,r,u),i=!0},p(r,[u]){const a={};u&2048&&(a.$$scope={dirty:u,ctx:r}),e.$set(a);const f={};u&2049&&(f.$$scope={dirty:u,ctx:r}),!s&&u&1&&(s=!0,f.show=r[0],pe(()=>s=!1)),l.$set(f)},i(r){i||(d(e.$$.fragment,r),d(l.$$.fragment,r),i=!0)},o(r){g(e.$$.fragment,r),g(l.$$.fragment,r),i=!1},d(r){r&&D(n),k(e,r),k(l,r)}}}function zs(t,e,n){let l,s;const{activeGroup:i,selectedStyles:o}=ae(ce);q(t,i,m=>n(10,s=m)),q(t,o,m=>n(9,l=m));let c=!1,r="",u=[];async function a(){if(r=s,u=l,u.length===0){Le({type:"warning",text:$("Style is not selected")});return}await Qt(),n(0,c=!0)}function f(){vl(r,u.map(m=>m.name)).then(m=>{n(0,c=!1),o.set([]),ge.set(m),Le({type:"success",text:$("Styles deleted")})})}const p=()=>n(0,c=!1);function _(m){c=m,n(0,c)}return[c,i,o,a,f,p,_]}class Ns extends U{constructor(e){super(),R(this,e,zs,Is,H,{})}}function Hs(t){let e=$("Close Better Styles")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function qs(t){let e,n;return e=new le({props:{$$slots:{default:[Hs]},$$scope:{ctx:t}}}),e.$on("click",t[0]),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,[s]){const i={};s&4&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Rs(t){const{isBetterStylesActive:e}=ae(ce);function n(){e.set(!1)}return[n]}class Us extends U{constructor(e){super(),R(this,e,Rs,qs,H,{})}}const ri="";function js(t){let e=$("Reset style")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Vs(t){let e=$("Yes, reset the current style")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Ks(t){let e=$("No, cancel the reset")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Ws(t){let e,n,l,s,i,o,c,r;return i=new le({props:{primary:!0,$$slots:{default:[Vs]},$$scope:{ctx:t}}}),i.$on("click",t[1]),c=new le({props:{$$slots:{default:[Ks]},$$scope:{ctx:t}}}),c.$on("click",t[3]),{c(){e=A("div"),n=A("p"),n.textContent=`${$("Are you sure you want to return the style to its default value?")}`,l=B(),s=A("div"),E(i.$$.fragment),o=B(),E(c.$$.fragment),v(n,"class","text svelte-19m7lge"),v(s,"class","buttons svelte-19m7lge"),v(e,"class","reset-style svelte-19m7lge")},m(u,a){T(u,e,a),h(e,n),h(e,l),h(e,s),w(i,s,null),h(s,o),w(c,s,null),r=!0},p(u,a){const f={};a&64&&(f.$$scope={dirty:a,ctx:u}),i.$set(f);const p={};a&64&&(p.$$scope={dirty:a,ctx:u}),c.$set(p)},i(u){r||(d(i.$$.fragment,u),d(c.$$.fragment,u),r=!0)},o(u){g(i.$$.fragment,u),g(c.$$.fragment,u),r=!1},d(u){u&&D(e),k(i),k(c)}}}function Js(t){let e,n,l,s,i;e=new le({props:{$$slots:{default:[js]},$$scope:{ctx:t}}}),e.$on("click",t[2]);function o(r){t[4](r)}let c={options:{hideCloseButton:!0},$$slots:{default:[Ws]},$$scope:{ctx:t}};return t[0]!==void 0&&(c.show=t[0]),l=new je({props:c}),oe.push(()=>de(l,"show",o)),{c(){E(e.$$.fragment),n=B(),E(l.$$.fragment)},m(r,u){w(e,r,u),T(r,n,u),w(l,r,u),i=!0},p(r,[u]){const a={};u&64&&(a.$$scope={dirty:u,ctx:r}),e.$set(a);const f={};u&65&&(f.$$scope={dirty:u,ctx:r}),!s&&u&1&&(s=!0,f.show=r[0],pe(()=>s=!1)),l.$set(f)},i(r){i||(d(e.$$.fragment,r),d(l.$$.fragment,r),i=!0)},o(r){g(e.$$.fragment,r),g(l.$$.fragment,r),i=!1},d(r){r&&D(n),k(e,r),k(l,r)}}}function Ys(t,e,n){const{tabName:l}=ae(ce);let s=!1;function i(){Tt(l).then(u=>{on(l,{name:"",...u},!0),n(0,s=!1)})}const o=()=>n(0,s=!0),c=()=>n(0,s=!1);function r(u){s=u,n(0,s)}return[s,i,o,c,r]}class Xs extends U{constructor(e){super(),R(this,e,Ys,Js,H,{})}}const ii="";function Qs(t){let e=$("Import styles.csv")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function Zs(t){let e=$("Yes, import styles.csv")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function xs(t){let e=$("No, cancel the import")+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p:C,d(l){l&&D(n)}}}function er(t){let e,n,l,s,i,o,c,r;return i=new le({props:{primary:!0,$$slots:{default:[Zs]},$$scope:{ctx:t}}}),i.$on("click",t[1]),c=new le({props:{$$slots:{default:[xs]},$$scope:{ctx:t}}}),c.$on("click",t[3]),{c(){e=A("div"),n=A("p"),n.textContent=`${$(`Would you like to import the contents of styles.csv into the "styles.csv" group? If the group doesn't exist, it will be created.`)}`,l=B(),s=A("div"),E(i.$$.fragment),o=B(),E(c.$$.fragment),v(n,"class","text svelte-mq4y37"),v(s,"class","buttons svelte-mq4y37"),v(e,"class","import-styles svelte-mq4y37")},m(u,a){T(u,e,a),h(e,n),h(e,l),h(e,s),w(i,s,null),h(s,o),w(c,s,null),r=!0},p(u,a){const f={};a&64&&(f.$$scope={dirty:a,ctx:u}),i.$set(f);const p={};a&64&&(p.$$scope={dirty:a,ctx:u}),c.$set(p)},i(u){r||(d(i.$$.fragment,u),d(c.$$.fragment,u),r=!0)},o(u){g(i.$$.fragment,u),g(c.$$.fragment,u),r=!1},d(u){u&&D(e),k(i),k(c)}}}function tr(t){let e,n,l,s,i;e=new le({props:{$$slots:{default:[Qs]},$$scope:{ctx:t}}}),e.$on("click",t[2]);function o(r){t[4](r)}let c={options:{hideCloseButton:!0},$$slots:{default:[er]},$$scope:{ctx:t}};return t[0]!==void 0&&(c.show=t[0]),l=new je({props:c}),oe.push(()=>de(l,"show",o)),{c(){E(e.$$.fragment),n=B(),E(l.$$.fragment)},m(r,u){w(e,r,u),T(r,n,u),w(l,r,u),i=!0},p(r,[u]){const a={};u&64&&(a.$$scope={dirty:u,ctx:r}),e.$set(a);const f={};u&65&&(f.$$scope={dirty:u,ctx:r}),!s&&u&1&&(s=!0,f.show=r[0],pe(()=>s=!1)),l.$set(f)},i(r){i||(d(e.$$.fragment,r),d(l.$$.fragment,r),i=!0)},o(r){g(e.$$.fragment,r),g(l.$$.fragment,r),i=!1},d(r){r&&D(n),k(e,r),k(l,r)}}}function nr(t,e,n){const{selectedStyles:l}=ae(ce);let s=!1;function i(){Tl().then(u=>{n(0,s=!1),u.length>0&&(l.set([]),ge.set(u),Le({type:"success",text:$("styles.csv imported")}))})}const o=()=>n(0,s=!0),c=()=>n(0,s=!1);function r(u){s=u,n(0,s)}return[s,i,o,c,r]}class lr extends U{constructor(e){super(),R(this,e,nr,tr,H,{})}}const oi="";function sr(t){let e,n;return e=new lr({}),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function rr(t){let e,n,l,s,i,o,c,r,u,a,f,p,_,m=!sn("better_styles_hide_import_styles_csv",!1),y,O,L;s=new rs({}),o=new ps({}),r=new Ms({}),a=new Ns({}),p=new Xs({});let F=m&&sr();return O=new Us({}),{c(){e=A("div"),n=A("p"),n.textContent=`${$("Better Styles")}`,l=B(),E(s.$$.fragment),i=B(),E(o.$$.fragment),c=B(),E(r.$$.fragment),u=B(),E(a.$$.fragment),f=B(),E(p.$$.fragment),_=B(),F&&F.c(),y=B(),E(O.$$.fragment),v(n,"class","label svelte-9wailw"),v(e,"class","tab-nav scroll-hide svelte-9wailw")},m(P,re){T(P,e,re),h(e,n),h(e,l),w(s,e,null),h(e,i),w(o,e,null),h(e,c),w(r,e,null),h(e,u),w(a,e,null),h(e,f),w(p,e,null),h(e,_),F&&F.m(e,null),h(e,y),w(O,e,null),L=!0},p:C,i(P){L||(d(s.$$.fragment,P),d(o.$$.fragment,P),d(r.$$.fragment,P),d(a.$$.fragment,P),d(p.$$.fragment,P),d(F),d(O.$$.fragment,P),L=!0)},o(P){g(s.$$.fragment,P),g(o.$$.fragment,P),g(r.$$.fragment,P),g(a.$$.fragment,P),g(p.$$.fragment,P),g(F),g(O.$$.fragment,P),L=!1},d(P){P&&D(e),k(s),k(o),k(r),k(a),k(p),F&&F.d(),k(O)}}}class ir extends U{constructor(e){super(),R(this,e,null,rr,H,{})}}const ui="";function or(t){let e=$(t[0])+"",n;return{c(){n=z(e)},m(l,s){T(l,n,s)},p(l,s){s&1&&e!==(e=$(l[0])+"")&&Se(n,e)},d(l){l&&D(n)}}}function ur(t){let e,n,l;return n=new le({props:{options:{disabled:t[1]===t[0]},$$slots:{default:[or]},$$scope:{ctx:t}}}),n.$on("click",t[3]),{c(){e=A("div"),E(n.$$.fragment),v(e,"class","group svelte-56qu4w")},m(s,i){T(s,e,i),w(n,e,null),l=!0},p(s,[i]){const o={};i&3&&(o.options={disabled:s[1]===s[0]}),i&33&&(o.$$scope={dirty:i,ctx:s}),n.$set(o)},i(s){l||(d(n.$$.fragment,s),l=!0)},o(s){g(n.$$.fragment,s),l=!1},d(s){s&&D(e),k(n)}}}function cr(t,e,n){let l,{group:s}=e;const{activeGroup:i,selectedStyles:o}=ae(ce);q(t,i,r=>n(1,l=r));function c(){o.set([]),i.set(s)}return t.$$set=r=>{"group"in r&&n(0,s=r.group)},[s,l,i,c]}class Jn extends U{constructor(e){super(),R(this,e,cr,ur,H,{group:0})}}function Yn(t,e,n){const l=t.slice();return l[3]=e[n],l}function ar(t){let e,n,l=be(t[0]),s=[];for(let o=0;o<l.length;o+=1)s[o]=Xn(Yn(t,l,o));const i=o=>g(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ne()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);T(o,e,c),n=!0},p(o,c){if(c&1){l=be(o[0]);let r;for(r=0;r<l.length;r+=1){const u=Yn(o,l,r);s[r]?(s[r].p(u,c),d(s[r],1)):(s[r]=Xn(u),s[r].c(),d(s[r],1),s[r].m(e.parentNode,e))}for(j(),r=l.length;r<s.length;r+=1)i(r);V()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)d(s[c]);n=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)g(s[c]);n=!1},d(o){o&&D(e),Je(s,o)}}}function fr(t){let e,n;return e=new Jn({props:{group:"default"}}),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:C,i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Xn(t){let e,n;return e=new Jn({props:{group:t[3]}}),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const i={};s&1&&(i.group=l[3]),e.$set(i)},i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function pr(t){let e,n,l,s;const i=[fr,ar],o=[];function c(r,u){return r[0].length===0?0:1}return n=c(t),l=o[n]=i[n](t),{c(){e=A("div"),l.c()},m(r,u){T(r,e,u),o[n].m(e,null),s=!0},p(r,[u]){let a=n;n=c(r),n===a?o[n].p(r,u):(j(),g(o[a],1,1,()=>{o[a]=null}),V(),l=o[n],l?l.p(r,u):(l=o[n]=i[n](r),l.c()),d(l,1),l.m(e,null))},i(r){s||(d(l),s=!0)},o(r){g(l),s=!1},d(r){r&&D(e),o[n].d()}}}function dr(t,e,n){let l,s;q(t,xe,o=>n(1,l=o)),q(t,ge,o=>n(2,s=o));let i;return t.$$.update=()=>{t.$$.dirty&6&&n(0,i=s.filter(o=>pt(o,l)).map(o=>o.name).sort((o,c)=>o.localeCompare(c)))},[i,l,s]}class gr extends U{constructor(e){super(),R(this,e,dr,pr,H,{})}}const ci="";function Qn(t,e,n){const l=t.slice();return l[2]=e[n],l}function Zn(t){let e,n,l=t[2].label+"",s,i,o,c=t[2].value+"",r,u;return{c(){e=A("div"),n=A("span"),s=z(l),i=B(),o=A("p"),r=z(c),u=B(),v(n,"class","label svelte-u1hv1k"),v(o,"class","value svelte-u1hv1k"),v(e,"class","field svelte-u1hv1k")},m(a,f){T(a,e,f),h(e,n),h(n,s),h(e,i),h(e,o),h(o,r),h(e,u)},p(a,f){f&1&&l!==(l=a[2].label+"")&&Se(s,l),f&1&&c!==(c=a[2].value+"")&&Se(r,c)},d(a){a&&D(e)}}}function _r(t){let e,n,l=be(t[1](t[0])),s=[];for(let i=0;i<l.length;i+=1)s[i]=Zn(Qn(t,l,i));return{c(){e=A("div"),n=A("div");for(let i=0;i<s.length;i+=1)s[i].c();v(n,"class","field-container svelte-u1hv1k"),v(e,"class","styles-details svelte-u1hv1k")},m(i,o){T(i,e,o),h(e,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null)},p(i,[o]){if(o&3){l=be(i[1](i[0]));let c;for(c=0;c<l.length;c+=1){const r=Qn(i,l,c);s[c]?s[c].p(r,o):(s[c]=Zn(r),s[c].c(),s[c].m(n,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=l.length}},i:C,o:C,d(i){i&&D(e),Je(s,i)}}}function mr(t){return t.filter(e=>e.value!=null)}function hr(t,e,n){let{style:l}=e;function s(i){var o,c,r,u,a,f,p,_;return mr([{label:$("Style name"),value:$(i.name)},{label:$("Exclusive"),value:i.checkpoint?$("Yes"):$("No")},{label:$("Prompt"),value:i.prompt},{label:$("Negative prompt"),value:i.negativePrompt},{label:$("Sampling method"),value:i.samplingMethod},{label:$("Sampling steps"),value:(o=i.samplingSteps)==null?void 0:o.toString()},{label:$("CFG Scale"),value:(c=i.cfgScale)==null?void 0:c.toString()},{label:$("Seed"),value:(r=i.seed)==null?void 0:r.toString()},{label:$("Restore faces"),value:i.restoreFaces?$("Enabled"):void 0},{label:$("Tiling"),value:i.tiling?$("Enabled"):void 0},{label:$("Hires. fix"),value:i.hiresFix?$("Enabled"):void 0},{label:$("Upscaler"),value:i.upscaler},{label:$("Hires steps"),value:(u=i.hiresSteps)==null?void 0:u.toString()},{label:$("Denoising strength"),value:(a=i.denoisingStrength)==null?void 0:a.toString()},{label:$("Upscale by"),value:(f=i.upscaleBy)==null?void 0:f.toString()},{label:$("Clip skip"),value:(p=i.clipSkip)==null?void 0:p.toString()},{label:$("Eta noise seed delta"),value:(_=i.etaNoiseSeedDelta)==null?void 0:_.toString()}])}return t.$$set=i=>{"style"in i&&n(0,l=i.style)},[l,s]}class $r extends U{constructor(e){super(),R(this,e,hr,_r,H,{style:0})}}const ai="";function br(t){let e,n;return e=new $r({props:{style:t[0]}}),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const i={};s&1&&(i.style=l[0]),e.$set(i)},i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function vr(t){let e,n,l,s,i,o,c,r,u,a,f,p=t[0].name+"",_,m,y,O,L,F,P,re;function S(I){t[15](I)}let _e={$$slots:{default:[br]},$$scope:{ctx:t}};return t[1]!==void 0&&(_e.show=t[1]),O=new je({props:_e}),oe.push(()=>de(O,"show",S)),{c(){e=A("div"),n=A("button"),l=B(),s=A("img"),c=B(),r=A("div"),u=A("a"),u.textContent=`${$("replace thumbnail")}`,a=B(),f=A("span"),_=z(p),y=B(),E(O.$$.fragment),v(n,"class","show-detail-button svelte-tznlbj"),v(n,"title",$("Show style details")),v(s,"alt",i=t[0].name+" - Thumbnail"),v(s,"class","image svelte-tznlbj"),v(s,"draggable","false"),Gt(s.src,o=t[2])||v(s,"src",o),v(u,"class","replace-preview svelte-tznlbj"),v(u,"href","/#"),v(f,"class","label svelte-tznlbj"),v(f,"title",m=t[0].name),v(r,"class","actions svelte-tznlbj"),v(e,"class","card svelte-tznlbj"),N(e,"active",t[3]),N(e,"selected",t[4])},m(I,M){T(I,e,M),h(e,n),h(e,l),h(e,s),h(e,c),h(e,r),h(r,u),h(r,a),h(r,f),h(f,_),T(I,y,M),w(O,I,M),F=!0,P||(re=[ie(n,"click",Vt(t[14])),ie(u,"click",Vt(Pl(t[9]))),ie(e,"click",t[8])],P=!0)},p(I,[M]){(!F||M&1&&i!==(i=I[0].name+" - Thumbnail"))&&v(s,"alt",i),(!F||M&4&&!Gt(s.src,o=I[2]))&&v(s,"src",o),(!F||M&1)&&p!==(p=I[0].name+"")&&Se(_,p),(!F||M&1&&m!==(m=I[0].name))&&v(f,"title",m),(!F||M&8)&&N(e,"active",I[3]),(!F||M&16)&&N(e,"selected",I[4]);const ne={};M&262145&&(ne.$$scope={dirty:M,ctx:I}),!L&&M&2&&(L=!0,ne.show=I[1],pe(()=>L=!1)),O.$set(ne)},i(I){F||(d(O.$$.fragment,I),F=!0)},o(I){g(O.$$.fragment,I),F=!1},d(I){I&&(D(e),D(y)),k(O,I),P=!1,fe(re)}}}function yr(t,e,n){let l,s,i,o,c;q(t,ln,S=>n(12,o=S)),q(t,nn,S=>n(13,c=S));let{style:r}=e;const{tabName:u,activeGroup:a,styleSearchKeyword:f,selectedStyles:p}=ae(ce);q(t,a,S=>n(16,l=S)),q(t,f,S=>n(11,i=S)),q(t,p,S=>n(10,s=S));let _=!1,m,y,O;function L(){O?p.update(S=>S.filter(_e=>_e!==r)):p.update(S=>[...S,r])}async function F(){const S=hn(u).getOrDefault("");if(!S){Le({type:"warning",text:$("Image is not selected")});return}await Bt(l,{...r,image:S}).then(ge.set)}const P=()=>n(1,_=!0);function re(S){_=S,n(1,_)}return t.$$set=S=>{"style"in S&&n(0,r=S.style)},t.$$.update=()=>{t.$$.dirty&12289&&(r.image!=null?n(2,m=`file=${c}/${r.image}?ts=${o}`):n(2,m="file=html/card-no-preview.png")),t.$$.dirty&2049&&n(3,y=r.name.toLowerCase().includes(i)),t.$$.dirty&1025&&n(4,O=s.includes(r))},[r,_,m,y,O,a,f,p,L,F,s,i,o,c,P,re]}class wr extends U{constructor(e){super(),R(this,e,yr,vr,H,{style:0})}}const fi="";function xn(t,e,n){const l=t.slice();return l[5]=e[n],l}function kr(t){let e,n,l=be(t[0]),s=[];for(let o=0;o<l.length;o+=1)s[o]=el(xn(t,l,o));const i=o=>g(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ne()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);T(o,e,c),n=!0},p(o,c){if(c&1){l=be(o[0]);let r;for(r=0;r<l.length;r+=1){const u=xn(o,l,r);s[r]?(s[r].p(u,c),d(s[r],1)):(s[r]=el(u),s[r].c(),d(s[r],1),s[r].m(e.parentNode,e))}for(j(),r=l.length;r<s.length;r+=1)i(r);V()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)d(s[c]);n=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)g(s[c]);n=!1},d(o){o&&D(e),Je(s,o)}}}function Sr(t){let e,n;return{c(){e=A("div"),n=A("p"),n.textContent=`${$('Style not yet registered. "Save style" button for register a new style.')}`,v(n,"class","svelte-owv4u5"),v(e,"class","no-cards svelte-owv4u5")},m(l,s){T(l,e,s),h(e,n)},p:C,i:C,o:C,d(l){l&&D(e)}}}function el(t){let e,n;return e=new wr({props:{style:t[5]}}),{c(){E(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const i={};s&1&&(i.style=l[5]),e.$set(i)},i(l){n||(d(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Er(t){let e,n,l,s;const i=[Sr,kr],o=[];function c(r,u){return r[0].length===0?0:1}return n=c(t),l=o[n]=i[n](t),{c(){e=A("div"),l.c(),v(e,"class","styles-cards")},m(r,u){T(r,e,u),o[n].m(e,null),s=!0},p(r,[u]){let a=n;n=c(r),n===a?o[n].p(r,u):(j(),g(o[a],1,1,()=>{o[a]=null}),V(),l=o[n],l?l.p(r,u):(l=o[n]=i[n](r),l.c()),d(l,1),l.m(e,null))},i(r){s||(d(l),s=!0)},o(r){g(l),s=!1},d(r){r&&D(e),o[n].d()}}}function Cr(t,e,n){let l,s,i;q(t,xe,r=>n(2,l=r)),q(t,ge,r=>n(4,i=r));const{activeGroup:o}=ae(ce);q(t,o,r=>n(3,s=r));let c;return t.$$.update=()=>{if(t.$$.dirty&28){const r=i.find(u=>u.name===s);n(0,c=r!=null?un(r,l):[])}},[c,o,l,s,i]}class Dr extends U{constructor(e){super(),R(this,e,Cr,Er,H,{})}}function Ar(t){let e,n,l,s;return{c(){e=A("button"),n=z("🔖"),v(e,"class",t[0].join(" ")),v(e,"title",$("Show Better Styles"))},m(i,o){T(i,e,o),h(e,n),l||(s=ie(e,"click",t[2]),l=!0)},p:C,i:C,o:C,d(i){i&&D(e),l=!1,s()}}}function Tr(t,e,n){let l,{baseElement:s}=e,i=Array.from(s.classList).filter(r=>r!=="force-hidden");const{isBetterStylesActive:o}=ae(ce);q(t,o,r=>n(4,l=r));function c(){o.set(!l)}return t.$$set=r=>{"baseElement"in r&&n(3,s=r.baseElement)},[i,o,c,s]}class Br extends U{constructor(e){super(),R(this,e,Tr,Ar,H,{baseElement:3})}}const pi="";function Or(t){let e,n,l,s,i,o,c,r,u,a,f;return s=new ir({}),c=new gr({}),u=new Dr({}),{c(){e=A("div"),n=A("div"),l=A("div"),E(s.$$.fragment),i=B(),o=A("div"),E(c.$$.fragment),r=B(),E(u.$$.fragment),v(o,"class","tab-item svelte-zi3e5r"),v(l,"class","tabs gradio-tabs extra-networks"),v(n,"class","compact gradio-row"),v(e,"class","better-styles form svelte-zi3e5r"),v(e,"id",a="better-styles-"+t[0]+"-styles"),N(e,"hidden",!t[1])},m(p,_){T(p,e,_),h(e,n),h(n,l),w(s,l,null),h(l,i),h(l,o),w(c,o,null),h(o,r),w(u,o,null),f=!0},p(p,[_]){(!f||_&1&&a!==(a="better-styles-"+p[0]+"-styles"))&&v(e,"id",a),(!f||_&2)&&N(e,"hidden",!p[1])},i(p){f||(d(s.$$.fragment,p),d(c.$$.fragment,p),d(u.$$.fragment,p),f=!0)},o(p){g(s.$$.fragment,p),g(c.$$.fragment,p),g(u.$$.fragment,p),f=!1},d(p){p&&D(e),k(s),k(c),k(u)}}}function Mr(t,e,n){let l,s,i,o;q(t,xe,p=>n(4,l=p)),q(t,ge,p=>n(5,s=p));let{tabName:c}=e;const r=me(!sn("better_styles_hide_by_default",!1));q(t,r,p=>n(1,o=p));const u=me("default");q(t,u,p=>n(6,i=p)),ql(ce,{tabName:c,isBetterStylesActive:r,activeGroup:u,styleSearchKeyword:me(""),selectedStyles:me([])});const a=(p,_)=>{const m=p.find(O=>O.name===i);if(m==null||pt(m,_))return;const y=p.sort((O,L)=>O.name.localeCompare(L.name)).find(O=>pt(O,_));u.set(y!=null?y.name:"default")};xe.subscribe(p=>a(s,p)),ge.subscribe(p=>a(p,l));const f=te(`#${c}_style_apply`);return f&&f.parentElement&&new Br({target:f.parentElement,props:{baseElement:f}}),t.$$set=p=>{"tabName"in p&&n(0,c=p.tabName)},[c,o,r,u]}class Gr extends U{constructor(e){super(),R(this,e,Mr,Or,H,{tabName:0})}}function Pr(t){const e=t-1;return e*e*e+1}function Fr(t,{delay:e=0,duration:n=400,easing:l=lt}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:l,css:i=>`opacity: ${i*s}`}}function Lr(t,{delay:e=0,duration:n=400,easing:l=Pr,x:s=0,y:i=0,opacity:o=0}={}){const c=getComputedStyle(t),r=+c.opacity,u=c.transform==="none"?"":c.transform,a=r*(1-o),[f,p]=Nt(s),[_,m]=Nt(i);return{delay:e,duration:n,easing:l,css:(y,O)=>`
			transform: ${u} translate(${(1-y)*f}${p}, ${(1-y)*_}${m});
			opacity: ${r-a*O}`}}const di="";function tl(t,e,n){const l=t.slice();return l[4]=e[n],l}function nl(t){let e,n=t[4].text+"",l,s,i,o,c,r,u,a;function f(){return t[2](t[4])}function p(){return t[3](t[4])}return{c(){e=A("button"),l=z(n),s=B(),v(e,"class",i="message "+t[4].type+" svelte-1hr4i4o"),N(e,"dark",ft())},m(_,m){T(_,e,m),h(e,l),h(e,s),r=!0,u||(a=[ie(e,"introend",f),ie(e,"click",p)],u=!0)},p(_,m){t=_,(!r||m&1)&&n!==(n=t[4].text+"")&&Se(l,n),(!r||m&1&&i!==(i="message "+t[4].type+" svelte-1hr4i4o"))&&v(e,"class",i),(!r||m&1)&&N(e,"dark",ft())},i(_){r||(_&&Ge(()=>{r&&(c&&c.end(1),o=jl(e,Lr,{y:128,duration:250}),o.start())}),r=!0)},o(_){o&&o.invalidate(),_&&(c=Vl(e,Fr,{})),r=!1},d(_){_&&D(e),_&&c&&c.end(),u=!1,fe(a)}}}function Ir(t){let e,n,l=be(t[0]),s=[];for(let o=0;o<l.length;o+=1)s[o]=nl(tl(t,l,o));const i=o=>g(s[o],1,1,()=>{s[o]=null});return{c(){e=A("div");for(let o=0;o<s.length;o+=1)s[o].c();v(e,"class","toast-container svelte-1hr4i4o")},m(o,c){T(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);n=!0},p(o,[c]){if(c&3){l=be(o[0]);let r;for(r=0;r<l.length;r+=1){const u=tl(o,l,r);s[r]?(s[r].p(u,c),d(s[r],1)):(s[r]=nl(u),s[r].c(),d(s[r],1),s[r].m(e,null))}for(j(),r=l.length;r<s.length;r+=1)i(r);V()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)d(s[c]);n=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)g(s[c]);n=!1},d(o){o&&D(e),Je(s,o)}}}function zr(t,e,n){let l;q(t,is,c=>n(0,l=c));function s(c){window.setTimeout(()=>Mn(c),c.duration||3e3)}return[l,s,c=>s(c),c=>Mn(c)]}class Nr extends U{constructor(e){super(),R(this,e,zr,Ir,H,{})}}let ll=null;onUiLoaded(()=>{ge.subscribe(()=>{ln.set(new Date().getTime())}),ll=Cl().then(t=>{Object.assign(localization,t)}),Sl().then(t=>{nn.set(t)}),yl().then(t=>{ge.set(t)}),new Nr({target:gradioApp()})}),onUiTabChange(()=>{const t=Ql();t!=="other"&&Hr(t)});function Hr(t){window.setTimeout(function e(){if(Object.keys(opts).length===0){window.setTimeout(e,125);return}qr(t),Promise.all([ll]).then(()=>{Rr(t)})},10)}function qr(t){Xl("better_styles_hide_original_styles",e=>{e&&(at(te(`#${t}_style_apply`),!0),at(te(`#${t}_style_create`),!0),at(te(`#${t}_styles_row`),!0))})}function Rr(t){if(te(`#better-styles-${t}-styles`))return;const e=te(`div#${t}_settings`);e==null||e.parentElement==null||new Gr({target:e.parentElement,anchor:e,props:{tabName:t}})}return{}}();
