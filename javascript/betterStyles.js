var BetterStyles=function(){"use strict";const dr="";function Vn(){return fetch(`/better-styles-api/v1/check-for-updates?ts=${new Date().getTime()}`).then(e=>e.json()).then(Wn)}function Wn(t){return typeof t!="object"?{update:!1}:Jn(t)?t:{update:!1}}function Jn(t){return typeof t.update!="boolean"?!1:t.version==null||typeof t.version=="string"}function Je(t){return Array.isArray(t)?t.filter(Xn):[]}function Xn(t){return typeof t!="object"||typeof t.name!="string"?!1:Array.isArray(t.styles)}function Yn(t){return fetch("/better-styles-api/v1/delete-styles",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(Je)}function Qn(){return fetch(`/better-styles-api/v1/all-style?ts=${new Date().getTime()}`).then(t=>t.json()).then(Je)}function Zn(){return fetch(`/better-styles-api/v1/images-dir?ts=${new Date().getTime()}`).then(t=>t.json()).then(el)}function el(t){return typeof t!="object"||typeof t.imagesDir!="string"?"":t.imagesDir}function tl(){return fetch(`/better-styles-api/v1/get-localization?ts=${new Date().getTime()}`).then(t=>t.json()).then(nl)}function nl(t){return typeof t!="object"?{}:ll(t)?t:{}}function ll(t){return Object.values(t).every(e=>typeof e=="string")}function mt(t){return fetch("/better-styles-api/v1/register-style",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(Je)}function A(){}const Xe=t=>t;function je(t,e){for(const n in e)t[n]=e[n];return t}function ht(t){return t()}function $t(){return Object.create(null)}function V(t){t.forEach(ht)}function Fe(t){return typeof t=="function"}function L(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ie;function bt(t,e){return Ie||(Ie=document.createElement("a")),Ie.href=e,t===Ie.href}function sl(t){return Object.keys(t).length===0}function rl(t,...e){if(t==null)return A;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function F(t,e,n){t.$$.on_destroy.push(rl(e,n))}function Ye(t,e,n,l){if(t){const s=vt(t,e,n,l);return t[0](s)}}function vt(t,e,n,l){return t[1]&&l?je(n.ctx.slice(),t[1](l(e))):n.ctx}function Qe(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],i=Math.max(e.dirty.length,s.length);for(let u=0;u<i;u+=1)r[u]=e.dirty[u]|s[u];return r}return e.dirty|s}return e.dirty}function Ze(t,e,n,l,s,r){if(s){const i=vt(e,n,l,r);t.p(i,s)}}function et(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function yt(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const wt=typeof window<"u";let kt=wt?()=>window.performance.now():()=>Date.now(),tt=wt?t=>requestAnimationFrame(t):A;const he=new Set;function St(t){he.forEach(e=>{e.c(t)||(he.delete(e),e.f())}),he.size!==0&&tt(St)}function Dt(t){let e;return he.size===0&&tt(St),{promise:new Promise(n=>{he.add(e={c:t,f:n})}),abort(){he.delete(e)}}}"WeakMap"in(typeof window<"u"?window:typeof globalThis<"u"?globalThis:global);function m(t,e){t.appendChild(e)}function Ct(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function il(t){const e=y("style");return ol(Ct(t),e),e.sheet}function ol(t,e){return m(t.head||t,e),e.sheet}function T(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function ze(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function q(t){return document.createTextNode(t)}function E(){return q(" ")}function qe(){return q("")}function x(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function ul(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Et(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const cl=["width","height"];function Te(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&cl.indexOf(l)===-1?t[l]=e[l]:b(t,l,e[l])}function al(t){return Array.from(t.childNodes)}function ue(t,e){e=""+e,t.data!==e&&(t.data=e)}function Tt(t,e){t.value=e??""}function I(t,e,n){t.classList[n?"add":"remove"](e)}function fl(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}const Ue=new Map;let He=0;function pl(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function dl(t,e){const n={stylesheet:il(e),rules:{}};return Ue.set(t,n),n}function Ot(t,e,n,l,s,r,i,u=0){const o=16.666/l;let c=`{
`;for(let B=0;B<=1;B+=o){const G=e+(n-e)*r(B);c+=B*100+`%{${i(G,1-G)}}
`}const a=c+`100% {${i(n,1-n)}}
}`,f=`__svelte_${pl(a)}_${u}`,p=Ct(t),{stylesheet:v,rules:d}=Ue.get(p)||dl(p,t);d[f]||(d[f]=!0,v.insertRule(`@keyframes ${f} ${a}`,v.cssRules.length));const O=t.style.animation||"";return t.style.animation=`${O?`${O}, `:""}${f} ${l}ms linear ${s}ms 1 both`,He+=1,f}function nt(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),He-=s,He||gl())}function gl(){tt(()=>{He||(Ue.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&C(e)}),Ue.clear())})}let Oe;function Ae(t){Oe=t}function lt(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function _l(t){lt().$$.on_destroy.push(t)}function ml(t,e){return lt().$$.context.set(t,e),e}function Y(t){return lt().$$.context.get(t)}function $e(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const be=[],Q=[];let ve=[];const st=[],At=Promise.resolve();let rt=!1;function Bt(){rt||(rt=!0,At.then(Gt))}function Mt(){return Bt(),At}function ye(t){ve.push(t)}function Be(t){st.push(t)}const it=new Set;let we=0;function Gt(){if(we!==0)return;const t=Oe;do{try{for(;we<be.length;){const e=be[we];we++,Ae(e),hl(e.$$)}}catch(e){throw be.length=0,we=0,e}for(Ae(null),be.length=0,we=0;Q.length;)Q.pop()();for(let e=0;e<ve.length;e+=1){const n=ve[e];it.has(n)||(it.add(n),n())}ve.length=0}while(be.length);for(;st.length;)st.pop()();rt=!1,it.clear(),Ae(t)}function hl(t){if(t.fragment!==null){t.update(),V(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ye)}}function $l(t){const e=[],n=[];ve.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ve=e}let Me;function Lt(){return Me||(Me=Promise.resolve(),Me.then(()=>{Me=null})),Me}function Ne(t,e,n){t.dispatchEvent(fl(`${e?"intro":"outro"}${n}`))}const Re=new Set;let ne;function W(){ne={r:0,c:[],p:ne}}function J(){ne.r||V(ne.c),ne=ne.p}function g(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function _(t,e,n,l){if(t&&t.o){if(Re.has(t))return;Re.add(t),ne.c.push(()=>{Re.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const Pt={duration:0};function bl(t,e,n){const l={direction:"in"};let s=e(t,n,l),r=!1,i,u,o=0;function c(){i&&nt(t,i)}function a(){const{delay:p=0,duration:v=300,easing:d=Xe,tick:O=A,css:B}=s||Pt;B&&(i=Ot(t,0,1,v,p,d,B,o++)),O(0,1);const G=kt()+p,M=G+v;u&&u.abort(),r=!0,ye(()=>Ne(t,!0,"start")),u=Dt(H=>{if(r){if(H>=M)return O(1,0),Ne(t,!0,"end"),c(),r=!1;if(H>=G){const D=d((H-G)/v);O(D,1-D)}}return r})}let f=!1;return{start(){f||(f=!0,nt(t),Fe(s)?(s=s(l),Lt().then(a)):a())},invalidate(){f=!1},end(){r&&(c(),r=!1)}}}function vl(t,e,n){const l={direction:"out"};let s=e(t,n,l),r=!0,i;const u=ne;u.r+=1;function o(){const{delay:c=0,duration:a=300,easing:f=Xe,tick:p=A,css:v}=s||Pt;v&&(i=Ot(t,1,0,a,c,f,v));const d=kt()+c,O=d+a;ye(()=>Ne(t,!1,"start")),Dt(B=>{if(r){if(B>=O)return p(0,1),Ne(t,!1,"end"),--u.r||V(u.c),!1;if(B>=d){const G=f((B-d)/a);p(1-G,G)}}return r})}return Fe(s)?Lt().then(()=>{s=s(l),o()}):o(),{end(c){c&&s.tick&&s.tick(1,0),r&&(i&&nt(t,i),r=!1)}}}function jt(t,e){const n={},l={},s={$$scope:1};let r=t.length;for(;r--;){const i=t[r],u=e[r];if(u){for(const o in i)o in u||(l[o]=1);for(const o in u)s[o]||(n[o]=u[o],s[o]=1);t[r]=u}else for(const o in i)s[o]=1}for(const i in l)i in n||(n[i]=void 0);return n}[...["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]];function Ge(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function S(t){t&&t.c()}function w(t,e,n,l){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),l||ye(()=>{const i=t.$$.on_mount.map(ht).filter(Fe);t.$$.on_destroy?t.$$.on_destroy.push(...i):V(i),t.$$.on_mount=[]}),r.forEach(ye)}function k(t,e){const n=t.$$;n.fragment!==null&&($l(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yl(t,e){t.$$.dirty[0]===-1&&(be.push(t),Bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(t,e,n,l,s,r,i,u=[-1]){const o=Oe;Ae(t);const c=t.$$={fragment:null,ctx:[],props:r,update:A,not_equal:s,bound:$t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:$t(),dirty:u,skip_bound:!1,root:e.target||o.$$.root};i&&i(c.root);let a=!1;if(c.ctx=n?n(t,e.props||{},(f,p,...v)=>{const d=v.length?v[0]:p;return c.ctx&&s(c.ctx[f],c.ctx[f]=d)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](d),a&&yl(t,f)),p}):[],c.update(),a=!0,V(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const f=al(e.target);c.fragment&&c.fragment.l(f),f.forEach(C)}else c.fragment&&c.fragment.c();e.intro&&g(t.$$.fragment),w(t,e.target,e.anchor,e.customElement),Gt()}Ae(o)}class j{$destroy(){k(this,1),this.$destroy=A}$on(e,n){if(!Fe(n))return A;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!sl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ke=[];function wl(t,e){return{subscribe:Z(t,e).subscribe}}function Z(t,e=A){let n;const l=new Set;function s(u){if(L(t,u)&&(t=u,n)){const o=!ke.length;for(const c of l)c[1](),ke.push(c,t);if(o){for(let c=0;c<ke.length;c+=2)ke[c][0](ke[c+1]);ke.length=0}}}function r(u){s(u(t))}function i(u,o=A){const c=[u,o];return l.add(c),l.size===1&&(n=e(s)||A),u(t),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:i}}function N(t){return gradioApp().querySelector(t)}function kl(t){return!!N(t)}function ot(t,e){t==null||t.classList.toggle("force-hidden",e)}const xe=wl("",t=>{let e=N("#sd_checkpoint_hash");const n=()=>(e==null&&(e=N("#sd_checkpoint_hash")),e);let l="";const s=()=>{var u;const i=(u=n())==null?void 0:u.title;i!==l&&t((l=i)||"")};s();const r=window.setInterval(s,250);return()=>{window.clearInterval(r)}}),Ft=Z(""),ee=Z([]),It=Z(new Date().getTime());function h(t,...e){const n=getTranslation(t)||t;return e.length===0?n:e.reduce((l,s,r)=>l.replaceAll(`{${r}}`,String(s)),n)}function zt(t,e){const n=opts[t];typeof n=="boolean"&&e(n)}function qt(t,e){if(e==="input")updateInput(t);else if(e==="change"){const n=new Event(e);Object.defineProperty(n,"target",{value:t}),t.dispatchEvent(n)}}function Sl(){const t=get_uiCurrentTabContent();if(t==null)return"other";const{id:e}=t;if(e.startsWith("tab_")){const n=e.slice(4);switch(n){case"txt2img":case"img2img":return n}}return"other"}function ut(){return kl(".gradio-container.dark")}const ct=Z([]),Dl=ct;function Se(t){ct.update(e=>e.some(n=>n.text===t.text)?e:[...e,Object.assign({type:"info",duration:3e3},t)])}function Ut(t){ct.update(e=>e.filter(n=>n!==t))}function Ht(t){const e=N(`#${t}_gallery > div > img`);if(!(e instanceof HTMLImageElement))return De();const n=()=>e.src.substring(e.src.indexOf("file=")+5);return{get:n,getOrDefault:n,with:l=>l(n())}}function Cl(){const t=N("#sd_checkpoint_hash");if(!(t instanceof HTMLAnchorElement))return De();const e=()=>t.title;return{get:e,getOrDefault:e,with:n=>n(e())}}function Nt(t){return rn(`#${t}_prompt textarea`)}function Rt(t){return rn(`#${t}_neg_prompt textarea`)}function xt(t){return sn(`#${t}_sampling input`)}function Kt(t){return le(`#${t}_steps input[type='number']`)}function Vt(t){return le(`#${t}_cfg_scale input[type='number']`)}function Wt(t){return le(`#${t}_seed input[type='number']`)}function Jt(t){return at(`#${t}_restore_faces input[type='checkbox']`)}function Xt(t){return at(`#${t}_tiling input[type='checkbox']`)}function Yt(t){return at(`#${t}_enable_hr input[type='checkbox']`)}function Qt(t){return sn(`#${t}_hr_upscaler input`)}function Zt(t){return le(`#${t}_hires_steps input[type='number']`)}function en(t){return le(`#${t}_denoising_strength input[type='number']`)}function tn(t){return le(`#${t}_hr_scale input[type='number']`)}function nn(){return le("#setting_CLIP_stop_at_last_layers input[type='number']")}function ln(){return le("#setting_eta_noise_seed_delta input[type='number']")}function De(){return{get:()=>null,getOrDefault:t=>t,with:()=>{},set:()=>!1}}function Ke(t){return{...t,getOrDefault:()=>t.get(),with:e=>e(t.get())}}function sn(t){const e=N(t);return e instanceof HTMLInputElement?Ke({get:()=>e.value,set:()=>!0}):De()}function rn(t){const e=N(t);return e instanceof HTMLTextAreaElement?Ke({get:()=>e.value,set:n=>(e.value=n,qt(e,"input"),!0)}):De()}function le(t){const e=N(t);return e instanceof HTMLInputElement?Ke({get:()=>e.valueAsNumber,set:n=>(e.valueAsNumber=n,qt(e,"input"),!0)}):De()}function at(t){const e=N(t);return e instanceof HTMLInputElement?Ke({get:()=>e.checked,set:n=>(e.checked!=n&&e.click(),!0)}):De()}const El=/,(\s+)?$/g,Tl=/^(\s+)?,/g;function on(t,e){return!t||El.test(t)||Tl.test(e)?t+e:`${t}, ${e}`}function Ol(t,e){if(e.prompt){const n=Nt(t);n.set(on(n.getOrDefault(""),e.prompt))}if(e.negativePrompt){const n=Rt(t);n.set(on(n.getOrDefault(""),e.negativePrompt))}e.samplingMethod&&xt(t).set(e.samplingMethod),e.samplingSteps&&Kt(t).set(e.samplingSteps),e.cfgScale&&Vt(t).set(e.cfgScale),e.seed&&Wt(t).set(e.seed),e.restoreFaces&&Jt(t).set(e.restoreFaces),e.tiling&&Xt(t).set(e.tiling),e.hiresFix&&Yt(t).set(e.hiresFix),e.upscaler&&Qt(t).set(e.upscaler),e.hiresSteps&&Zt(t).set(e.hiresSteps),e.denoisingStrength&&en(t).set(e.denoisingStrength),e.upscaleBy&&tn(t).set(e.upscaleBy),e.clipSkip&&nn().set(e.clipSkip),e.etaNoiseSeedDelta&&ln().set(e.etaNoiseSeedDelta)}function Al(t){const e={};return Ht(t).with(n=>e.image=n),Cl().with(n=>e.checkpoint=n),Nt(t).with(n=>e.prompt=n),Rt(t).with(n=>e.negativePrompt=n),xt(t).with(n=>e.samplingMethod=n),Kt(t).with(n=>e.samplingSteps=n),Vt(t).with(n=>e.cfgScale=n),Wt(t).with(n=>e.seed=n),Jt(t).with(n=>e.restoreFaces=n),Xt(t).with(n=>e.tiling=n),Yt(t).with(n=>e.hiresFix=n),Qt(t).with(n=>e.upscaler=n),Zt(t).with(n=>e.hiresSteps=n),en(t).with(n=>e.denoisingStrength=n),tn(t).with(n=>e.upscaleBy=n),nn().with(n=>e.clipSkip=n),ln().with(n=>e.etaNoiseSeedDelta=n),e}function un(t,e){return t.styles.filter(n=>n.checkpoint==null||n.checkpoint===e)}function ft(t,e){return un(t,e).length>0}const X=Symbol(),mr="";function Bl(t){let e,n,l,s=[t[1],{class:"text-input scroll-hide"}],r={};for(let i=0;i<s.length;i+=1)r=je(r,s[i]);return{c(){e=y("textarea"),Te(e,r),I(e,"svelte-17bcadh",!0)},m(i,u){T(i,e,u),e.autofocus&&e.focus(),Tt(e,t[0]),n||(l=[x(e,"input",t[5]),x(e,"change",t[3]),x(e,"input",t[4])],n=!0)},p(i,[u]){u&1&&Tt(e,i[0]),I(e,"svelte-17bcadh",!0)},i:A,o:A,d(i){i&&C(e),n=!1,V(l)}}}function Ml(t,e,n){let{value:l=""}=e,{options:s={}}=e;const i=Object.assign(Object.assign({},{rows:1}),s);function u(a){$e.call(this,t,a)}function o(a){$e.call(this,t,a)}function c(){l=this.value,n(0,l)}return t.$$set=a=>{"value"in a&&n(0,l=a.value),"options"in a&&n(2,s=a.options)},[l,i,s,u,o,c]}class cn extends j{constructor(e){super(),P(this,e,Ml,Bl,L,{value:0,options:2})}}const hr="";function Gl(t){let e,n,l;return n=new cn({props:{options:{placeholder:h("Search...")}}}),n.$on("input",t[0]),{c(){e=y("div"),S(n.$$.fragment),b(e,"class","search svelte-arajpf")},m(s,r){T(s,e,r),w(n,e,null),l=!0},p:A,i(s){l||(g(n.$$.fragment,s),l=!0)},o(s){_(n.$$.fragment,s),l=!1},d(s){s&&C(e),k(n)}}}function Ll(t){const{styleSearchKeyword:e}=Y(X);function n(l){l.target instanceof HTMLTextAreaElement&&e.set(l.target.value.toLowerCase())}return[n]}class Pl extends j{constructor(e){super(),P(this,e,Ll,Gl,L,{})}}const $r="";function jl(t){let e,n,l,s;const r=t[3].default,i=Ye(r,t,t[2],null);let u=[t[1],{class:"button lg"}],o={};for(let c=0;c<u.length;c+=1)o=je(o,u[c]);return{c(){e=y("button"),i&&i.c(),Te(e,o),I(e,"primary",t[0]),I(e,"secondary",!t[0]),I(e,"svelte-1n3b0wn",!0)},m(c,a){T(c,e,a),i&&i.m(e,null),e.autofocus&&e.focus(),n=!0,l||(s=x(e,"click",t[4]),l=!0)},p(c,[a]){i&&i.p&&(!n||a&4)&&Ze(i,r,c,c[2],n?Qe(r,c[2],a,null):et(c[2]),null),Te(e,o=jt(u,[a&2&&c[1],{class:"button lg"}])),I(e,"primary",c[0]),I(e,"secondary",!c[0]),I(e,"svelte-1n3b0wn",!0)},i(c){n||(g(i,c),n=!0)},o(c){_(i,c),n=!1},d(c){c&&C(e),i&&i.d(c),l=!1,s()}}}function Fl(t,e,n){let{$$slots:l={},$$scope:s}=e,{primary:r=!1}=e,{options:i={}}=e;function u(o){$e.call(this,t,o)}return t.$$set=o=>{"primary"in o&&n(0,r=o.primary),"options"in o&&n(1,i=o.options),"$$scope"in o&&n(2,s=o.$$scope)},[r,i,s,l,u]}class te extends j{constructor(e){super(),P(this,e,Fl,jl,L,{primary:0,options:1})}}function Il(t){let e=h("Apply style")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function zl(t){let e,n;return e=new te({props:{$$slots:{default:[Il]},$$scope:{ctx:t}}}),e.$on("click",t[1]),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,[s]){const r={};s&16&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function ql(t,e,n){let l;const{tabName:s,selectedStyles:r}=Y(X);F(t,r,u=>n(2,l=u));function i(){if(l.length===0){Se({type:"warning",text:h("Style is not selected")});return}l.forEach(u=>Ol(s,u)),r.set([])}return[r,i]}class Ul extends j{constructor(e){super(),P(this,e,ql,zl,L,{})}}function pt(t=24){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let l=0;l<t;l++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}const br="";function an(t){let e,n;const l=t[6].default,s=Ye(l,t,t[5],null);return{c(){e=y("div"),s&&s.c(),b(e,"class","modal-container svelte-163ndra"),I(e,"dark",ut())},m(r,i){T(r,e,i),s&&s.m(e,null),t[7](e),n=!0},p(r,i){s&&s.p&&(!n||i&32)&&Ze(s,l,r,r[5],n?Qe(l,r[5],i,null):et(r[5]),null)},i(r){n||(g(s,r),n=!0)},o(r){_(s,r),n=!1},d(r){r&&C(e),s&&s.d(r),t[7](null)}}}function Hl(t){let e,n,l=t[1]&&an(t);return{c(){l&&l.c(),e=qe()},m(s,r){l&&l.m(s,r),T(s,e,r),n=!0},p(s,[r]){s[1]?l?(l.p(s,r),r&2&&g(l,1)):(l=an(s),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(W(),_(l,1,1,()=>{l=null}),J())},i(s){n||(g(l),n=!0)},o(s){_(l),n=!1},d(s){l&&l.d(s),s&&C(e)}}}const Le={};function se(t){return Le[t]}function Nl(t,e,n){let{$$slots:l={},$$scope:s}=e,{id:r=""}=e,i,u=!1,o;Le[r]&&Le[r].close();function c(p){n(1,u=!0),o=p}function a(){n(1,u=!1),o!=null&&o()}Le[r]={open:c,close:a},_l(()=>{delete Le[r]});function f(p){Q[p?"unshift":"push"](()=>{i=p,n(0,i)})}return t.$$set=p=>{"id"in p&&n(2,r=p.id),"$$scope"in p&&n(5,s=p.$$scope)},t.$$.update=()=>{var p;t.$$.dirty&3&&u&&i&&((p=i.parentNode)==null||p.removeChild(i),document.body.append(i))},[i,u,r,c,a,s,l,f]}class Rl extends j{constructor(e){super(),P(this,e,Nl,Hl,L,{id:2,open:3,close:4})}get open(){return this.$$.ctx[3]}get close(){return this.$$.ctx[4]}}function xl(t={}){return Object.assign({group:null,style:{name:null,image:null,checkpoint:null,prompt:null,negativePrompt:null,samplingMethod:null,samplingSteps:null,cfgScale:null,seed:null,restoreFaces:null,tiling:null,hiresFix:null,upscaler:null,hiresSteps:null,denoisingStrength:null,upscaleBy:null,clipSkip:null,etaNoiseSeedDelta:null}},t)}function Kl(t){const e=l=>l===h("default")?"default":l,n={...t.style};for(const l in n)(n[l]==null||typeof n[l]=="string"&&!n[l])&&delete n[l];return{group:e(t.group),style:n}}const vr="";function Vl(t){let e,n,l,s,r,i,u;function o(a){t[3](a)}let c={options:t[2]};return t[0]!==void 0&&(c.value=t[0]),r=new cn({props:c}),Q.push(()=>Ge(r,"value",o)),r.$on("change",t[4]),r.$on("input",t[5]),{c(){e=y("div"),n=y("span"),l=q(t[1]),s=E(),S(r.$$.fragment),b(n,"class","label svelte-lrg8sw"),b(e,"class","text-field svelte-lrg8sw")},m(a,f){T(a,e,f),m(e,n),m(n,l),m(e,s),w(r,e,null),u=!0},p(a,[f]){(!u||f&2)&&ue(l,a[1]);const p={};f&4&&(p.options=a[2]),!i&&f&1&&(i=!0,p.value=a[0],Be(()=>i=!1)),r.$set(p)},i(a){u||(g(r.$$.fragment,a),u=!0)},o(a){_(r.$$.fragment,a),u=!1},d(a){a&&C(e),k(r)}}}function Wl(t,e,n){let{label:l}=e,{value:s=""}=e,{options:r={}}=e;function i(c){s=c,n(0,s)}function u(c){$e.call(this,t,c)}function o(c){$e.call(this,t,c)}return t.$$set=c=>{"label"in c&&n(1,l=c.label),"value"in c&&n(0,s=c.value),"options"in c&&n(2,r=c.options)},[s,l,r,i,u,o]}class Ve extends j{constructor(e){super(),P(this,e,Wl,Vl,L,{label:1,value:0,options:2})}}const yr="";function fn(t){let e,n;return e=new Rl({props:{id:t[0],$$slots:{default:[Jl]},$$scope:{ctx:t}}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.id=l[0]),s&134&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function pn(t){let e,n,l;return{c(){e=y("button"),e.textContent="×",b(e,"class","close-button svelte-1qw0te")},m(s,r){T(s,e,r),n||(l=x(e,"click",t[3]),n=!0)},p:A,d(s){s&&C(e),n=!1,l()}}}function Jl(t){let e,n,l,s,r,i,u,o=!t[1].hiddenCloseButton&&pn(t);const c=t[5].default,a=Ye(c,t,t[7],null);return{c(){e=y("div"),n=y("div"),o&&o.c(),l=E(),s=y("div"),a&&a.c(),b(n,"class","dialog svelte-1qw0te"),b(e,"class","outside svelte-1qw0te")},m(f,p){T(f,e,p),m(e,n),o&&o.m(n,null),m(n,l),m(n,s),a&&a.m(s,null),t[6](n),r=!0,i||(u=x(e,"click",t[4]),i=!0)},p(f,p){f[1].hiddenCloseButton?o&&(o.d(1),o=null):o?o.p(f,p):(o=pn(f),o.c(),o.m(n,l)),a&&a.p&&(!r||p&128)&&Ze(a,c,f,f[7],r?Qe(c,f[7],p,null):et(f[7]),null)},i(f){r||(g(a,f),r=!0)},o(f){_(a,f),r=!1},d(f){f&&C(e),o&&o.d(),a&&a.d(f),t[6](null),i=!1,u()}}}function Xl(t){let e,n,l=t[0]&&fn(t);return{c(){l&&l.c(),e=qe()},m(s,r){l&&l.m(s,r),T(s,e,r),n=!0},p(s,[r]){s[0]?l?(l.p(s,r),r&1&&g(l,1)):(l=fn(s),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(W(),_(l,1,1,()=>{l=null}),J())},i(s){n||(g(l),n=!0)},o(s){_(l),n=!1},d(s){l&&l.d(s),s&&C(e)}}}function Yl(t,e,n){let{$$slots:l={},$$scope:s}=e,{id:r}=e,{options:i={}}=e,u;function o(){var f;(f=se(r))==null||f.close()}function c(f){i.closeOnClickOutside!==!1&&f.target instanceof Node&&(u.contains(f.target)||o())}function a(f){Q[f?"unshift":"push"](()=>{u=f,n(2,u)})}return t.$$set=f=>{"id"in f&&n(0,r=f.id),"options"in f&&n(1,i=f.options),"$$scope"in f&&n(7,s=f.$$scope)},[r,i,u,o,c,l,a,s]}class dt extends j{constructor(e){super(),P(this,e,Yl,Xl,L,{id:0,options:1})}}const wr="";function Ql(t){let e,n,l,s,r,i,u,o=[{class:"input"},t[2],{type:"checkbox"}],c={};for(let a=0;a<o.length;a+=1)c=je(c,o[a]);return{c(){e=y("label"),n=y("input"),l=E(),s=y("span"),r=q(t[1]),Te(n,c),I(n,"svelte-1wpl5ad",!0),b(s,"class","label svelte-1wpl5ad"),b(e,"class","checkbox svelte-1wpl5ad"),I(e,"disabled",t[2].disabled)},m(a,f){T(a,e,f),m(e,n),n.autofocus&&n.focus(),n.checked=t[0],m(e,l),m(e,s),m(s,r),i||(u=[x(n,"change",t[4]),x(n,"change",t[3])],i=!0)},p(a,[f]){Te(n,c=jt(o,[{class:"input"},f&4&&a[2],{type:"checkbox"}])),f&1&&(n.checked=a[0]),I(n,"svelte-1wpl5ad",!0),f&2&&ue(r,a[1]),f&4&&I(e,"disabled",a[2].disabled)},i:A,o:A,d(a){a&&C(e),i=!1,V(u)}}}function Zl(t,e,n){let{label:l}=e,{value:s=!1}=e,{options:r={}}=e;function i(o){$e.call(this,t,o)}function u(){s=this.checked,n(0,s)}return t.$$set=o=>{"label"in o&&n(1,l=o.label),"value"in o&&n(0,s=o.value),"options"in o&&n(2,r=o.options)},[s,l,r,i,u]}class R extends j{constructor(e){super(),P(this,e,Zl,Ql,L,{label:1,value:0,options:2})}}const kr="";function dn(t){let e,n,l,s,r,i,u,o;return e=new R({props:{label:h("Upscaler")}}),e.$on("change",t[4]("upscaler")),l=new R({props:{label:h("Hires steps")}}),l.$on("change",t[4]("hiresSteps")),r=new R({props:{label:h("Denoising strength")}}),r.$on("change",t[4]("denoisingStrength")),u=new R({props:{label:h("Upscale by")}}),u.$on("change",t[4]("upscaleBy")),{c(){S(e.$$.fragment),n=E(),S(l.$$.fragment),s=E(),S(r.$$.fragment),i=E(),S(u.$$.fragment)},m(c,a){w(e,c,a),T(c,n,a),w(l,c,a),T(c,s,a),w(r,c,a),T(c,i,a),w(u,c,a),o=!0},p:A,i(c){o||(g(e.$$.fragment,c),g(l.$$.fragment,c),g(r.$$.fragment,c),g(u.$$.fragment,c),o=!0)},o(c){_(e.$$.fragment,c),_(l.$$.fragment,c),_(r.$$.fragment,c),_(u.$$.fragment,c),o=!1},d(c){k(e,c),c&&C(n),k(l,c),c&&C(s),k(r,c),c&&C(i),k(u,c)}}}function es(t){let e=h("Save with this content")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function ts(t){let e=h("Close without saving")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function ns(t){let e,n,l,s,r,i,u,o,c,a,f,p,v,d,O,B,G,M,H,D,z,Pe,ce,En,ae,Tn,fe,On,pe,An,de,Bn,gt,ge,Mn,_e,Gn,Ce,me,Ln,re,Pn,Ee,ie,jn,oe,We;function cr($){t[6]($)}let Fn={label:h("Style name")};t[0].style.name!==void 0&&(Fn.value=t[0].style.name),l=new Ve({props:Fn}),Q.push(()=>Ge(l,"value",cr));function ar($){t[7]($)}let In={label:h("Group")};t[0].group!==void 0&&(In.value=t[0].group),i=new Ve({props:In}),Q.push(()=>Ge(i,"value",ar));function fr($){t[8]($)}let zn={label:h("Prompt"),options:{rows:3}};t[0].style.prompt!==void 0&&(zn.value=t[0].style.prompt),c=new Ve({props:zn}),Q.push(()=>Ge(c,"value",fr));function pr($){t[9]($)}let qn={label:h("Negative prompt"),options:{rows:3}};t[0].style.negativePrompt!==void 0&&(qn.value=t[0].style.negativePrompt),p=new Ve({props:qn}),Q.push(()=>Ge(p,"value",pr)),H=new R({props:{label:h("Sampling method")}}),H.$on("change",t[4]("samplingMethod")),z=new R({props:{label:h("Sampling steps")}}),z.$on("change",t[4]("samplingSteps")),ce=new R({props:{label:h("CFG Scale")}}),ce.$on("change",t[4]("cfgScale")),ae=new R({props:{label:h("Seed")}}),ae.$on("change",t[4]("seed")),fe=new R({props:{label:h("Restore faces")}}),fe.$on("change",t[4]("restoreFaces")),pe=new R({props:{label:h("Tiling")}}),pe.$on("change",t[4]("tiling")),de=new R({props:{label:h("Hires. fix")}}),de.$on("change",t[4]("hiresFix"));let U=t[2].hiresFix&&dn(t);return ge=new R({props:{label:h("Clip skip")}}),ge.$on("change",t[4]("clipSkip")),_e=new R({props:{label:h("Eta noise seed delta")}}),_e.$on("change",t[4]("etaNoiseSeedDelta")),me=new R({props:{label:h("Make this style exclusive to the current checkpoint")}}),me.$on("change",t[4]("checkpoint")),re=new R({props:{label:h("Use the current image as a thumbnail"),options:{disabled:t[2].image==null}}}),re.$on("change",t[4]("image")),ie=new te({props:{options:{disabled:!t[3]},primary:!0,$$slots:{default:[es]},$$scope:{ctx:t}}}),ie.$on("click",t[5]),oe=new te({props:{$$slots:{default:[ts]},$$scope:{ctx:t}}}),oe.$on("click",t[10]),{c(){e=y("div"),n=y("div"),S(l.$$.fragment),r=E(),S(i.$$.fragment),o=E(),S(c.$$.fragment),f=E(),S(p.$$.fragment),d=E(),O=y("div"),B=y("span"),B.textContent=`${h("Save these parameters as style")}`,G=E(),M=y("ul"),S(H.$$.fragment),D=E(),S(z.$$.fragment),Pe=E(),S(ce.$$.fragment),En=E(),S(ae.$$.fragment),Tn=E(),S(fe.$$.fragment),On=E(),S(pe.$$.fragment),An=E(),S(de.$$.fragment),Bn=E(),U&&U.c(),gt=E(),S(ge.$$.fragment),Mn=E(),S(_e.$$.fragment),Gn=E(),Ce=y("div"),S(me.$$.fragment),Ln=E(),S(re.$$.fragment),Pn=E(),Ee=y("div"),S(ie.$$.fragment),jn=E(),S(oe.$$.fragment),b(n,"class","input-fields svelte-2bsch3"),b(B,"class","label"),b(M,"class","parameter-fields svelte-2bsch3"),b(O,"class","parameters"),b(Ce,"class","other-options svelte-2bsch3"),b(Ee,"class","buttons svelte-2bsch3"),b(e,"class","save-style svelte-2bsch3")},m($,K){T($,e,K),m(e,n),w(l,n,null),m(n,r),w(i,n,null),m(n,o),w(c,n,null),m(n,f),w(p,n,null),m(e,d),m(e,O),m(O,B),m(O,G),m(O,M),w(H,M,null),m(M,D),w(z,M,null),m(M,Pe),w(ce,M,null),m(M,En),w(ae,M,null),m(M,Tn),w(fe,M,null),m(M,On),w(pe,M,null),m(M,An),w(de,M,null),m(M,Bn),U&&U.m(M,null),m(M,gt),w(ge,M,null),m(M,Mn),w(_e,M,null),m(e,Gn),m(e,Ce),w(me,Ce,null),m(Ce,Ln),w(re,Ce,null),m(e,Pn),m(e,Ee),w(ie,Ee,null),m(Ee,jn),w(oe,Ee,null),We=!0},p($,K){const Un={};!s&&K&1&&(s=!0,Un.value=$[0].style.name,Be(()=>s=!1)),l.$set(Un);const Hn={};!u&&K&1&&(u=!0,Hn.value=$[0].group,Be(()=>u=!1)),i.$set(Hn);const Nn={};!a&&K&1&&(a=!0,Nn.value=$[0].style.prompt,Be(()=>a=!1)),c.$set(Nn);const Rn={};!v&&K&1&&(v=!0,Rn.value=$[0].style.negativePrompt,Be(()=>v=!1)),p.$set(Rn),$[2].hiresFix?U?(U.p($,K),K&4&&g(U,1)):(U=dn($),U.c(),g(U,1),U.m(M,gt)):U&&(W(),_(U,1,1,()=>{U=null}),J());const xn={};K&4&&(xn.options={disabled:$[2].image==null}),re.$set(xn);const _t={};K&8&&(_t.options={disabled:!$[3]}),K&2048&&(_t.$$scope={dirty:K,ctx:$}),ie.$set(_t);const Kn={};K&2048&&(Kn.$$scope={dirty:K,ctx:$}),oe.$set(Kn)},i($){We||(g(l.$$.fragment,$),g(i.$$.fragment,$),g(c.$$.fragment,$),g(p.$$.fragment,$),g(H.$$.fragment,$),g(z.$$.fragment,$),g(ce.$$.fragment,$),g(ae.$$.fragment,$),g(fe.$$.fragment,$),g(pe.$$.fragment,$),g(de.$$.fragment,$),g(U),g(ge.$$.fragment,$),g(_e.$$.fragment,$),g(me.$$.fragment,$),g(re.$$.fragment,$),g(ie.$$.fragment,$),g(oe.$$.fragment,$),We=!0)},o($){_(l.$$.fragment,$),_(i.$$.fragment,$),_(c.$$.fragment,$),_(p.$$.fragment,$),_(H.$$.fragment,$),_(z.$$.fragment,$),_(ce.$$.fragment,$),_(ae.$$.fragment,$),_(fe.$$.fragment,$),_(pe.$$.fragment,$),_(de.$$.fragment,$),_(U),_(ge.$$.fragment,$),_(_e.$$.fragment,$),_(me.$$.fragment,$),_(re.$$.fragment,$),_(ie.$$.fragment,$),_(oe.$$.fragment,$),We=!1},d($){$&&C(e),k(l),k(i),k(c),k(p),k(H),k(z),k(ce),k(ae),k(fe),k(pe),k(de),U&&U.d(),k(ge),k(_e),k(me),k(re),k(ie),k(oe)}}}function ls(t){let e,n;return e=new dt({props:{id:t[1],options:{hiddenCloseButton:!0,closeOnClickOutside:!1},$$slots:{default:[ns]},$$scope:{ctx:t}}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,[s]){const r={};s&2&&(r.id=l[1]),s&2063&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function ss(t,e,n){let{id:l}=e,{capturedStyle:s}=e,{saveData:r}=e,i;const u=d=>O=>{O.target instanceof HTMLInputElement&&n(0,r.style={...r.style,[d]:O.target.checked?s[d]:null},r)};async function o(){await mt(Kl(r)).then(d=>{var O;(O=se(l))==null||O.close(),ee.set(d),Se({type:"success",text:h("Style registered")})})}function c(d){t.$$.not_equal(r.style.name,d)&&(r.style.name=d,n(0,r))}function a(d){t.$$.not_equal(r.group,d)&&(r.group=d,n(0,r))}function f(d){t.$$.not_equal(r.style.prompt,d)&&(r.style.prompt=d,n(0,r))}function p(d){t.$$.not_equal(r.style.negativePrompt,d)&&(r.style.negativePrompt=d,n(0,r))}const v=()=>{var d;return(d=se(l))==null?void 0:d.close()};return t.$$set=d=>{"id"in d&&n(1,l=d.id),"capturedStyle"in d&&n(2,s=d.capturedStyle),"saveData"in d&&n(0,r=d.saveData)},t.$$.update=()=>{t.$$.dirty&9&&(n(3,i=r.group.length>0),n(3,i=i&&(r.style.name||"").length>0))},[r,l,s,i,u,o,c,a,f,p,v]}class rs extends j{constructor(e){super(),P(this,e,ss,ls,L,{id:1,capturedStyle:2,saveData:0})}}function gn(t){let e,n;return e=new rs({props:{capturedStyle:t[0],saveData:t[1],id:t[2]}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.capturedStyle=l[0]),s&2&&(r.saveData=l[1]),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function is(t){let e=h("Save style")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function os(t){let e,n,l,s=t[0]&&t[1]&&gn(t);return n=new te({props:{$$slots:{default:[is]},$$scope:{ctx:t}}}),n.$on("click",t[4]),{c(){s&&s.c(),e=E(),S(n.$$.fragment)},m(r,i){s&&s.m(r,i),T(r,e,i),w(n,r,i),l=!0},p(r,[i]){r[0]&&r[1]?s?(s.p(r,i),i&3&&g(s,1)):(s=gn(r),s.c(),g(s,1),s.m(e.parentNode,e)):s&&(W(),_(s,1,1,()=>{s=null}),J());const u={};i&128&&(u.$$scope={dirty:i,ctx:r}),n.$set(u)},i(r){l||(g(s),g(n.$$.fragment,r),l=!0)},o(r){_(s),_(n.$$.fragment,r),l=!1},d(r){s&&s.d(r),r&&C(e),k(n,r)}}}function us(t,e,n){let l;const s=pt(),{tabName:r,activeGroup:i}=Y(X);F(t,i,a=>n(5,l=a));let u,o;async function c(){var a;n(0,u=Al(r)),n(1,o=xl({group:l,style:{prompt:u.prompt||"",negativePrompt:u.negativePrompt||""}})),await Mt(),(a=se(s))==null||a.open()}return[u,o,s,i,c]}class cs extends j{constructor(e){super(),P(this,e,us,os,L,{})}}const Sr="";function as(t){let e=h("Execute the deletion")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function fs(t){let e=h("Close without deleting")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function ps(t){let e,n,l,s,r,i,u,o;return r=new te({props:{primary:!0,$$slots:{default:[as]},$$scope:{ctx:t}}}),r.$on("click",t[1]),u=new te({props:{$$slots:{default:[fs]},$$scope:{ctx:t}}}),u.$on("click",t[4]),{c(){e=y("div"),n=y("p"),n.textContent=`${h("Delete all selected styles. This action cannot be undone. Are you sure?")}`,l=E(),s=y("div"),S(r.$$.fragment),i=E(),S(u.$$.fragment),b(n,"class","text svelte-1xecb1f"),b(s,"class","buttons svelte-1xecb1f"),b(e,"class","delete-styles svelte-1xecb1f")},m(c,a){T(c,e,a),m(e,n),m(e,l),m(e,s),w(r,s,null),m(s,i),w(u,s,null),o=!0},p(c,a){const f={};a&32&&(f.$$scope={dirty:a,ctx:c}),r.$set(f);const p={};a&32&&(p.$$scope={dirty:a,ctx:c}),u.$set(p)},i(c){o||(g(r.$$.fragment,c),g(u.$$.fragment,c),o=!0)},o(c){_(r.$$.fragment,c),_(u.$$.fragment,c),o=!1},d(c){c&&C(e),k(r),k(u)}}}function ds(t){let e,n;return e=new dt({props:{id:t[0],options:{hiddenCloseButton:!0,closeOnClickOutside:!1},$$slots:{default:[ps]},$$scope:{ctx:t}}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,[s]){const r={};s&1&&(r.id=l[0]),s&33&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function gs(t,e,n){let{id:l}=e,{group:s}=e,{styles:r}=e;async function i(){await Yn({group:s,styles:r.map(o=>o.name)}).then(o=>{var c;(c=se(l))==null||c.close(),ee.set(o),Se({type:"success",text:h("Styles deleted")})})}const u=()=>{var o;return(o=se(l))==null?void 0:o.close()};return t.$$set=o=>{"id"in o&&n(0,l=o.id),"group"in o&&n(2,s=o.group),"styles"in o&&n(3,r=o.styles)},[l,i,s,r,u]}class _s extends j{constructor(e){super(),P(this,e,gs,ds,L,{id:0,group:2,styles:3})}}function _n(t){let e,n;return e=new _s({props:{group:t[0],styles:t[1],id:t[2]}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.group=l[0]),s&2&&(r.styles=l[1]),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function ms(t){let e=h("Delete style")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function hs(t){let e,n,l,s=t[0]&&t[1]&&_n(t);return n=new te({props:{$$slots:{default:[ms]},$$scope:{ctx:t}}}),n.$on("click",t[5]),{c(){s&&s.c(),e=E(),S(n.$$.fragment)},m(r,i){s&&s.m(r,i),T(r,e,i),w(n,r,i),l=!0},p(r,[i]){r[0]&&r[1]?s?(s.p(r,i),i&3&&g(s,1)):(s=_n(r),s.c(),g(s,1),s.m(e.parentNode,e)):s&&(W(),_(s,1,1,()=>{s=null}),J());const u={};i&256&&(u.$$scope={dirty:i,ctx:r}),n.$set(u)},i(r){l||(g(s),g(n.$$.fragment,r),l=!0)},o(r){_(s),_(n.$$.fragment,r),l=!1},d(r){s&&s.d(r),r&&C(e),k(n,r)}}}function $s(t,e,n){let l,s;const r=pt(),{activeGroup:i,selectedStyles:u}=Y(X);F(t,i,f=>n(7,s=f)),F(t,u,f=>n(6,l=f));let o,c;async function a(){var f;if(n(0,o=s),n(1,c=l),c.length===0){Se({type:"warning",text:h("Style is not selected")});return}await Mt(),(f=se(r))==null||f.open(()=>u.set([]))}return[o,c,r,i,u,a]}class bs extends j{constructor(e){super(),P(this,e,$s,hs,L,{})}}function vs(t){let e=h("Close Better Styles")+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p:A,d(l){l&&C(n)}}}function ys(t){let e,n;return e=new te({props:{$$slots:{default:[vs]},$$scope:{ctx:t}}}),e.$on("click",t[0]),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,[s]){const r={};s&4&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function ws(t){const{activeBetterStyles:e}=Y(X);function n(){e.set(!1)}return[n]}class ks extends j{constructor(e){super(),P(this,e,ws,ys,L,{})}}const Dr="";function Ss(t){let e,n,l,s,r,i,u,o,c,a,f,p,v;return s=new Pl({}),i=new Ul({}),o=new cs({}),a=new bs({}),p=new ks({}),{c(){e=y("div"),n=y("p"),n.textContent=`${h("Better Styles")}`,l=E(),S(s.$$.fragment),r=E(),S(i.$$.fragment),u=E(),S(o.$$.fragment),c=E(),S(a.$$.fragment),f=E(),S(p.$$.fragment),b(n,"class","label svelte-9wailw"),b(e,"class","tab-nav scroll-hide svelte-9wailw")},m(d,O){T(d,e,O),m(e,n),m(e,l),w(s,e,null),m(e,r),w(i,e,null),m(e,u),w(o,e,null),m(e,c),w(a,e,null),m(e,f),w(p,e,null),v=!0},p:A,i(d){v||(g(s.$$.fragment,d),g(i.$$.fragment,d),g(o.$$.fragment,d),g(a.$$.fragment,d),g(p.$$.fragment,d),v=!0)},o(d){_(s.$$.fragment,d),_(i.$$.fragment,d),_(o.$$.fragment,d),_(a.$$.fragment,d),_(p.$$.fragment,d),v=!1},d(d){d&&C(e),k(s),k(i),k(o),k(a),k(p)}}}class Ds extends j{constructor(e){super(),P(this,e,null,Ss,L,{})}}const Cr="";function Cs(t){let e=h(t[0])+"",n;return{c(){n=q(e)},m(l,s){T(l,n,s)},p(l,s){s&1&&e!==(e=h(l[0])+"")&&ue(n,e)},d(l){l&&C(n)}}}function Es(t){let e,n,l;return n=new te({props:{options:{disabled:t[1]===t[0]},$$slots:{default:[Cs]},$$scope:{ctx:t}}}),n.$on("click",t[3]),{c(){e=y("div"),S(n.$$.fragment),b(e,"class","group svelte-56qu4w")},m(s,r){T(s,e,r),w(n,e,null),l=!0},p(s,[r]){const i={};r&3&&(i.options={disabled:s[1]===s[0]}),r&33&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){l||(g(n.$$.fragment,s),l=!0)},o(s){_(n.$$.fragment,s),l=!1},d(s){s&&C(e),k(n)}}}function Ts(t,e,n){let l,{group:s}=e;const{activeGroup:r,selectedStyles:i}=Y(X);F(t,r,o=>n(1,l=o));function u(){i.set([]),r.set(s)}return t.$$set=o=>{"group"in o&&n(0,s=o.group)},[s,l,r,u]}class mn extends j{constructor(e){super(),P(this,e,Ts,Es,L,{group:0})}}function hn(t,e,n){const l=t.slice();return l[3]=e[n],l}function Os(t){let e,n,l=t[0],s=[];for(let i=0;i<l.length;i+=1)s[i]=$n(hn(t,l,i));const r=i=>_(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=qe()},m(i,u){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(i,u);T(i,e,u),n=!0},p(i,u){if(u&1){l=i[0];let o;for(o=0;o<l.length;o+=1){const c=hn(i,l,o);s[o]?(s[o].p(c,u),g(s[o],1)):(s[o]=$n(c),s[o].c(),g(s[o],1),s[o].m(e.parentNode,e))}for(W(),o=l.length;o<s.length;o+=1)r(o);J()}},i(i){if(!n){for(let u=0;u<l.length;u+=1)g(s[u]);n=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)_(s[u]);n=!1},d(i){ze(s,i),i&&C(e)}}}function As(t){let e,n;return e=new mn({props:{group:"default"}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p:A,i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function $n(t){let e,n;return e=new mn({props:{group:t[3]}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.group=l[3]),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Bs(t){let e,n,l,s;const r=[As,Os],i=[];function u(o,c){return o[0].length===0?0:1}return n=u(t),l=i[n]=r[n](t),{c(){e=y("div"),l.c()},m(o,c){T(o,e,c),i[n].m(e,null),s=!0},p(o,[c]){let a=n;n=u(o),n===a?i[n].p(o,c):(W(),_(i[a],1,1,()=>{i[a]=null}),J(),l=i[n],l?l.p(o,c):(l=i[n]=r[n](o),l.c()),g(l,1),l.m(e,null))},i(o){s||(g(l),s=!0)},o(o){_(l),s=!1},d(o){o&&C(e),i[n].d()}}}function Ms(t,e,n){let l,s;F(t,xe,i=>n(1,l=i)),F(t,ee,i=>n(2,s=i));let r;return t.$$.update=()=>{t.$$.dirty&6&&n(0,r=s.filter(i=>ft(i,l)).map(i=>i.name).sort((i,u)=>i.localeCompare(u)))},[r,l,s]}class Gs extends j{constructor(e){super(),P(this,e,Ms,Bs,L,{})}}const Er="";function bn(t,e,n){const l=t.slice();return l[3]=e[n],l}function vn(t){let e,n,l=t[3].label+"",s,r,i,u=t[3].value+"",o,c;return{c(){e=y("div"),n=y("span"),s=q(l),r=E(),i=y("p"),o=q(u),c=E(),b(n,"class","label svelte-xwb16l"),b(i,"class","value svelte-xwb16l"),b(e,"class","field svelte-xwb16l")},m(a,f){T(a,e,f),m(e,n),m(n,s),m(e,r),m(e,i),m(i,o),m(e,c)},p(a,f){f&2&&l!==(l=a[3].label+"")&&ue(s,l),f&2&&u!==(u=a[3].value+"")&&ue(o,u)},d(a){a&&C(e)}}}function Ls(t){let e,n,l=t[2](t[1]),s=[];for(let r=0;r<l.length;r+=1)s[r]=vn(bn(t,l,r));return{c(){e=y("div"),n=y("div");for(let r=0;r<s.length;r+=1)s[r].c();b(n,"class","field-container svelte-xwb16l"),b(e,"class","styles-detail svelte-xwb16l")},m(r,i){T(r,e,i),m(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(n,null)},p(r,i){if(i&6){l=r[2](r[1]);let u;for(u=0;u<l.length;u+=1){const o=bn(r,l,u);s[u]?s[u].p(o,i):(s[u]=vn(o),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=l.length}},d(r){r&&C(e),ze(s,r)}}}function Ps(t){let e,n;return e=new dt({props:{id:t[0],$$slots:{default:[Ls]},$$scope:{ctx:t}}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,[s]){const r={};s&1&&(r.id=l[0]),s&66&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function js(t){return t.filter(e=>e.value!=null)}function Fs(t,e,n){let{id:l}=e,{style:s}=e;function r(i){var u,o,c,a,f,p,v,d;return js([{label:h("Style name"),value:h(i.name)},{label:h("Exclusive"),value:i.checkpoint?h("Yes"):h("No")},{label:h("Prompt"),value:i.prompt},{label:h("Negative prompt"),value:i.negativePrompt},{label:h("Sampling method"),value:i.samplingMethod},{label:h("Sampling steps"),value:(u=i.samplingSteps)==null?void 0:u.toString()},{label:h("CFG Scale"),value:(o=i.cfgScale)==null?void 0:o.toString()},{label:h("Seed"),value:(c=i.seed)==null?void 0:c.toString()},{label:h("Restore faces"),value:i.restoreFaces?h("Enabled"):void 0},{label:h("Tiling"),value:i.tiling?h("Enabled"):void 0},{label:h("Hires. fix"),value:i.hiresFix?h("Enabled"):void 0},{label:h("Upscaler"),value:i.upscaler},{label:h("Hires steps"),value:(a=i.hiresSteps)==null?void 0:a.toString()},{label:h("Denoising strength"),value:(f=i.denoisingStrength)==null?void 0:f.toString()},{label:h("Upscale by"),value:(p=i.upscaleBy)==null?void 0:p.toString()},{label:h("Clip skip"),value:(v=i.clipSkip)==null?void 0:v.toString()},{label:h("Eta noise seed delta"),value:(d=i.etaNoiseSeedDelta)==null?void 0:d.toString()}])}return t.$$set=i=>{"id"in i&&n(0,l=i.id),"style"in i&&n(1,s=i.style)},[l,s,r]}class Is extends j{constructor(e){super(),P(this,e,Fs,Ps,L,{id:0,style:1})}}const Tr="";function zs(t){let e,n,l,s,r,i,u,o,c,a,f,p,v,d=t[0].name+"",O,B,G,M,H;return e=new Is({props:{id:t[4],style:t[0]}}),{c(){S(e.$$.fragment),n=E(),l=y("div"),s=y("button"),r=E(),i=y("img"),c=E(),a=y("div"),f=y("a"),f.textContent=`${h("replace thumbnail")}`,p=E(),v=y("span"),O=q(d),b(s,"class","show-detail-button svelte-tznlbj"),b(s,"title",h("Show styles detail")),b(i,"alt",u=t[0].name+" - Thumbnail"),b(i,"class","image svelte-tznlbj"),b(i,"draggable","false"),bt(i.src,o=t[1])||b(i,"src",o),b(f,"class","replace-preview svelte-tznlbj"),b(f,"href","/#"),b(v,"class","label svelte-tznlbj"),b(v,"title",B=t[0].name),b(a,"class","actions svelte-tznlbj"),b(l,"class","card svelte-tznlbj"),I(l,"active",t[2]),I(l,"selected",t[3])},m(D,z){w(e,D,z),T(D,n,z),T(D,l,z),m(l,s),m(l,r),m(l,i),m(l,c),m(l,a),m(a,f),m(a,p),m(a,v),m(v,O),G=!0,M||(H=[x(s,"click",Et(t[9])),x(f,"click",Et(ul(t[10]))),x(l,"click",t[8])],M=!0)},p(D,[z]){const Pe={};z&1&&(Pe.style=D[0]),e.$set(Pe),(!G||z&1&&u!==(u=D[0].name+" - Thumbnail"))&&b(i,"alt",u),(!G||z&2&&!bt(i.src,o=D[1]))&&b(i,"src",o),(!G||z&1)&&d!==(d=D[0].name+"")&&ue(O,d),(!G||z&1&&B!==(B=D[0].name))&&b(v,"title",B),(!G||z&4)&&I(l,"active",D[2]),(!G||z&8)&&I(l,"selected",D[3])},i(D){G||(g(e.$$.fragment,D),G=!0)},o(D){_(e.$$.fragment,D),G=!1},d(D){k(e,D),D&&C(n),D&&C(l),M=!1,V(H)}}}function qs(t,e,n){let l,s,r,i,u;F(t,It,D=>n(13,i=D)),F(t,Ft,D=>n(14,u=D));let{style:o}=e;const c=pt(),{tabName:a,activeGroup:f,styleSearchKeyword:p,selectedStyles:v}=Y(X);F(t,f,D=>n(15,l=D)),F(t,p,D=>n(12,r=D)),F(t,v,D=>n(11,s=D));let d,O,B;function G(){B?v.update(D=>D.filter(z=>z!==o)):v.update(D=>[...D,o])}function M(){var D;(D=se(c))==null||D.open()}async function H(){const D=Ht(a).getOrDefault("");if(!D){Se({type:"warning",text:h("Image is not selected")});return}await mt({group:l,style:{...o,image:D}}).then(ee.set)}return t.$$set=D=>{"style"in D&&n(0,o=D.style)},t.$$.update=()=>{t.$$.dirty&24577&&(o.image!=null?n(1,d=`file=${u}/${o.image}?ts=${i}`):n(1,d="file=html/card-no-preview.png")),t.$$.dirty&4097&&n(2,O=o.name.toLowerCase().includes(r)),t.$$.dirty&2049&&n(3,B=s.includes(o))},[o,d,O,B,c,f,p,v,G,M,H,s,r,i,u]}class Us extends j{constructor(e){super(),P(this,e,qs,zs,L,{style:0})}}const Or="";function yn(t,e,n){const l=t.slice();return l[5]=e[n],l}function Hs(t){let e,n,l=t[0],s=[];for(let i=0;i<l.length;i+=1)s[i]=wn(yn(t,l,i));const r=i=>_(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=qe()},m(i,u){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(i,u);T(i,e,u),n=!0},p(i,u){if(u&1){l=i[0];let o;for(o=0;o<l.length;o+=1){const c=yn(i,l,o);s[o]?(s[o].p(c,u),g(s[o],1)):(s[o]=wn(c),s[o].c(),g(s[o],1),s[o].m(e.parentNode,e))}for(W(),o=l.length;o<s.length;o+=1)r(o);J()}},i(i){if(!n){for(let u=0;u<l.length;u+=1)g(s[u]);n=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)_(s[u]);n=!1},d(i){ze(s,i),i&&C(e)}}}function Ns(t){let e,n;return{c(){e=y("div"),n=y("p"),n.textContent=`${h('Style not yet registered. "Save style" button for register a new style.')}`,b(n,"class","svelte-owv4u5"),b(e,"class","no-cards svelte-owv4u5")},m(l,s){T(l,e,s),m(e,n)},p:A,i:A,o:A,d(l){l&&C(e)}}}function wn(t){let e,n;return e=new Us({props:{style:t[5]}}),{c(){S(e.$$.fragment)},m(l,s){w(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.style=l[5]),e.$set(r)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){k(e,l)}}}function Rs(t){let e,n,l,s;const r=[Ns,Hs],i=[];function u(o,c){return o[0].length===0?0:1}return n=u(t),l=i[n]=r[n](t),{c(){e=y("div"),l.c(),b(e,"class","styles-cards")},m(o,c){T(o,e,c),i[n].m(e,null),s=!0},p(o,[c]){let a=n;n=u(o),n===a?i[n].p(o,c):(W(),_(i[a],1,1,()=>{i[a]=null}),J(),l=i[n],l?l.p(o,c):(l=i[n]=r[n](o),l.c()),g(l,1),l.m(e,null))},i(o){s||(g(l),s=!0)},o(o){_(l),s=!1},d(o){o&&C(e),i[n].d()}}}function xs(t,e,n){let l,s,r;F(t,xe,o=>n(2,l=o)),F(t,ee,o=>n(4,r=o));const{activeGroup:i}=Y(X);F(t,i,o=>n(3,s=o));let u;return t.$$.update=()=>{if(t.$$.dirty&28){const o=r.find(c=>c.name===s);n(0,u=o!=null?un(o,l):[])}},[u,i,l,s,r]}class Ks extends j{constructor(e){super(),P(this,e,xs,Rs,L,{})}}function Vs(t){let e,n,l,s;return{c(){e=y("button"),n=q("🔖"),b(e,"class",t[0].join(" ")),b(e,"title",h("Show Better Styles"))},m(r,i){T(r,e,i),m(e,n),l||(s=x(e,"click",t[2]),l=!0)},p:A,i:A,o:A,d(r){r&&C(e),l=!1,s()}}}function Ws(t,e,n){let l,{baseElement:s}=e,r=Array.from(s.classList).filter(o=>o!=="force-hidden");const{activeBetterStyles:i}=Y(X);F(t,i,o=>n(4,l=o));function u(){i.set(!l)}return t.$$set=o=>{"baseElement"in o&&n(3,s=o.baseElement)},[r,i,u,s]}class Js extends j{constructor(e){super(),P(this,e,Ws,Vs,L,{baseElement:3})}}const Ar="";function Xs(t){let e,n,l,s,r,i,u,o,c,a,f;return s=new Ds({}),u=new Gs({}),c=new Ks({}),{c(){e=y("div"),n=y("div"),l=y("div"),S(s.$$.fragment),r=E(),i=y("div"),S(u.$$.fragment),o=E(),S(c.$$.fragment),b(i,"class","tab-item svelte-zi3e5r"),b(l,"class","tabs gradio-tabs extra-networks"),b(n,"class","compact gradio-row"),b(e,"class","better-styles form svelte-zi3e5r"),b(e,"id",a="better-styles-"+t[0]+"-styles"),I(e,"hidden",!t[1])},m(p,v){T(p,e,v),m(e,n),m(n,l),w(s,l,null),m(l,r),m(l,i),w(u,i,null),m(i,o),w(c,i,null),f=!0},p(p,[v]){(!f||v&1&&a!==(a="better-styles-"+p[0]+"-styles"))&&b(e,"id",a),(!f||v&2)&&I(e,"hidden",!p[1])},i(p){f||(g(s.$$.fragment,p),g(u.$$.fragment,p),g(c.$$.fragment,p),f=!0)},o(p){_(s.$$.fragment,p),_(u.$$.fragment,p),_(c.$$.fragment,p),f=!1},d(p){p&&C(e),k(s),k(u),k(c)}}}function Ys(t,e,n){let l,s,r,i;F(t,xe,p=>n(4,l=p)),F(t,ee,p=>n(5,s=p));let{tabName:u}=e;const o=Z(!0);F(t,o,p=>n(1,i=p));const c=Z("default");F(t,c,p=>n(6,r=p)),ml(X,{tabName:u,activeBetterStyles:o,activeGroup:c,styleSearchKeyword:Z(""),selectedStyles:Z([])});const a=(p,v)=>{const d=p.find(B=>B.name===r);if(d==null||ft(d,v))return;const O=p.sort((B,G)=>B.name.localeCompare(G.name)).find(B=>ft(B,v));c.set(O!=null?O.name:"default")};xe.subscribe(p=>a(s,p)),ee.subscribe(p=>a(p,l));const f=N(`#${u}_style_apply`);return new Js({target:f.parentElement,props:{baseElement:f}}),t.$$set=p=>{"tabName"in p&&n(0,u=p.tabName)},[u,i,o,c]}class Qs extends j{constructor(e){super(),P(this,e,Ys,Xs,L,{tabName:0})}}function Zs(t){const e=t-1;return e*e*e+1}function er(t,{delay:e=0,duration:n=400,easing:l=Xe}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:l,css:r=>`opacity: ${r*s}`}}function tr(t,{delay:e=0,duration:n=400,easing:l=Zs,x:s=0,y:r=0,opacity:i=0}={}){const u=getComputedStyle(t),o=+u.opacity,c=u.transform==="none"?"":u.transform,a=o*(1-i),[f,p]=yt(s),[v,d]=yt(r);return{delay:e,duration:n,easing:l,css:(O,B)=>`
			transform: ${c} translate(${(1-O)*f}${p}, ${(1-O)*v}${d});
			opacity: ${o-a*B}`}}const Br="";function kn(t,e,n){const l=t.slice();return l[4]=e[n],l}function Sn(t){let e,n=t[4].text+"",l,s,r,i,u,o,c,a;function f(){return t[2](t[4])}function p(){return t[3](t[4])}return{c(){e=y("button"),l=q(n),s=E(),b(e,"class",r="message "+t[4].type+" svelte-1hr4i4o"),I(e,"dark",ut())},m(v,d){T(v,e,d),m(e,l),m(e,s),o=!0,c||(a=[x(e,"introend",f),x(e,"click",p)],c=!0)},p(v,d){t=v,(!o||d&1)&&n!==(n=t[4].text+"")&&ue(l,n),(!o||d&1&&r!==(r="message "+t[4].type+" svelte-1hr4i4o"))&&b(e,"class",r),(!o||d&1)&&I(e,"dark",ut())},i(v){o||(ye(()=>{o&&(u&&u.end(1),i=bl(e,tr,{y:128,duration:250}),i.start())}),o=!0)},o(v){i&&i.invalidate(),u=vl(e,er,{}),o=!1},d(v){v&&C(e),v&&u&&u.end(),c=!1,V(a)}}}function nr(t){let e,n,l=t[0],s=[];for(let i=0;i<l.length;i+=1)s[i]=Sn(kn(t,l,i));const r=i=>_(s[i],1,1,()=>{s[i]=null});return{c(){e=y("div");for(let i=0;i<s.length;i+=1)s[i].c();b(e,"class","toast-container svelte-1hr4i4o")},m(i,u){T(i,e,u);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);n=!0},p(i,[u]){if(u&3){l=i[0];let o;for(o=0;o<l.length;o+=1){const c=kn(i,l,o);s[o]?(s[o].p(c,u),g(s[o],1)):(s[o]=Sn(c),s[o].c(),g(s[o],1),s[o].m(e,null))}for(W(),o=l.length;o<s.length;o+=1)r(o);J()}},i(i){if(!n){for(let u=0;u<l.length;u+=1)g(s[u]);n=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)_(s[u]);n=!1},d(i){i&&C(e),ze(s,i)}}}function lr(t,e,n){let l;F(t,Dl,u=>n(0,l=u));function s(u){window.setTimeout(()=>Ut(u),u.duration||3e3)}return[l,s,u=>s(u),u=>Ut(u)]}class sr extends j{constructor(e){super(),P(this,e,lr,nr,L,{})}}let Dn=null,Cn=!1;onUiLoaded(()=>{ee.subscribe(()=>{It.set(new Date().getTime())}),Dn=tl().then(t=>{Object.assign(localization,t)}),Zn().then(t=>{Ft.set(t)}),Qn().then(t=>{ee.set(t)}),new sr({target:gradioApp()})}),onUiTabChange(async()=>{const t=Sl();t!=="other"&&await rr(t)});async function rr(t){ir(t),await Promise.all([Dn]).then(()=>{or(t),ur()})}function ir(t){zt("better_styles_hide_original_styles",e=>{e&&(ot(N(`#${t}_style_apply`),!0),ot(N(`#${t}_style_create`),!0),ot(N(`#${t}_styles_row`),!0))})}function or(t){if(N(`#better-styles-${t}-styles`))return;const e=N(`div#${t}_settings`);e==null||e.parentElement==null||new Qs({target:e.parentElement,anchor:e,props:{tabName:t}})}function ur(){Cn||(Cn=!0,zt("better_styles_update_notify_enabled",async t=>{t&&await Vn().then(e=>{e.update&&Se({type:"info",text:h("Better Styles version {0} is available",e.version),duration:1e4})})}))}return{}}();
